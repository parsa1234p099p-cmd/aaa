<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8" />
    <title>ูพูู ูุฏุฑุช - ุขูุง ุฒุฑุงุจ (ุฑุณูพุงูุณู)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        * {
            box-sizing: border-box;
            font-family: Vazirmatn,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif
        }

        body {
            margin: 0;
            background: radial-gradient(circle at top,#020617,#02011a 48%,#000000 100%);
            color: #e5e7eb
        }

        a {
            text-decoration: none;
            color: inherit
        }

        .wrap {
            min-height: 100vh;
            display: flex;
            flex-direction: column
        }

        /* ====== HEADER / NAVBAR ====== */
        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 10px 14px;
            border-bottom: 1px solid rgba(148,163,184,.35);
            background: linear-gradient(90deg,#020617,#020824);
            position: sticky;
            top: 0;
            z-index: 40
        }

        .brand {
            display: flex;
            gap: 10px;
            align-items: center;
            min-width: 0;
        }

        .logo {
            width: 40px;
            height: 40px;
            border-radius: 999px;
            background: radial-gradient(circle at 30% 20%,#ffeaa7,#facc15,#92400e);
            box-shadow: 0 0 14px rgba(250,204,21,.7);
            flex-shrink: 0;
        }

        .brand-main {
            margin: 0;
            font-weight: 800;
            font-size: 18px;
            color: #facc15
        }

        .brand-sub {
            margin: 0;
            font-size: 11px;
            opacity: .8;
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
            max-width: 220px;
        }

        .admin-chip {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,.5);
            background: rgba(15,23,42,.8);
            white-space: nowrap
        }

        .btn {
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,.45);
            background: transparent;
            color: #e5e7eb;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            white-space: nowrap
        }

        .btn:hover {
            border-color: #facc15
        }

        .btn-gold {
            background: radial-gradient(circle at 30% 20%,#ffeaa7,#facc15,#f97316);
            color: #111827;
            border: none;
            box-shadow: 0 0 14px rgba(250,204,21,.7)
        }

        .btn:disabled {
            opacity: .6;
            cursor: default
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ุฏฺฉูู ููู ููุจุฑฺฏุฑ (ููุท ููุจุงู) */
        .menu-toggle {
            display: none;
            width: 36px;
            height: 36px;
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,.6);
            background: rgba(15,23,42,.9);
            align-items: center;
            justify-content: center;
            cursor: pointer;
            padding: 0;
        }

        .menu-toggle span {
            width: 18px;
            height: 2px;
            background: #e5e7eb;
            border-radius: 999px;
            display: block;
            transition: transform .2s ease, opacity .2s ease;
        }

        .menu-toggle span + span {
            margin-top: 3px;
        }

        .menu-toggle.active span:nth-child(1) {
            transform: translateY(5px) rotate(45deg);
        }

        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .menu-toggle.active span:nth-child(3) {
            transform: translateY(-5px) rotate(-45deg);
        }

        /* ููู ฺฉุดู ููุจุงู */
        .header-actions-panel {
            display: none;
        }

        .header-actions-panel.open {
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: rgba(15,23,42,.98);
            border-bottom: 1px solid rgba(148,163,184,.35);
            padding: 10px 14px 12px;
        }

        .header-nav {
            display: flex;
            gap: 10px;
            font-size: 12px;
            flex-wrap: wrap;
        }

        .header-nav a {
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,.45);
            background: rgba(15,23,42,.8);
            font-size: 11px;
        }

        .header-nav a:hover {
            border-color: #facc15;
        }

        main {
            flex: 1;
            max-width: 1050px;
            margin: 14px auto;
            padding: 0 12px 20px
        }

        .card {
            border-radius: 18px;
            border: 1px solid rgba(148,163,184,.35);
            background: radial-gradient(circle at top,rgba(30,64,175,.22),rgba(15,23,42,.98));
            padding: 14px;
            margin-bottom: 14px
        }

        h2 {
            margin: 0 0 8px;
            font-size: 18px;
            color: #facc15
        }

        h3 {
            margin: 10px 0 8px;
            font-size: 15px;
            color: #fde68a
        }

        p {
            margin: 4px 0;
            font-size: 13px;
            line-height: 1.9
        }

        label {
            display: block;
            font-size: 12px;
            margin-bottom: 3px;
            opacity: .9
        }

        .input, select {
            width: 100%;
            background: rgba(15,23,42,.95);
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,.45);
            padding: 7px 11px;
            color: #e5e7eb;
            font-size: 13px;
            outline: none
        }

        .input:focus, select:focus {
            border-color: #facc15;
            box-shadow: 0 0 0 1px rgba(250,204,21,.35)
        }

        .row {
            display: grid;
            grid-template-columns: repeat(2,minmax(0,1fr));
            gap: 10px
        }

        .status {
            font-size: 12px;
            margin-top: 6px;
            min-height: 16px
        }

        .status.ok {
            color: #bbf7d0
        }

        .status.err {
            color: #fecaca
        }

        .preview-strip {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 6px;
            margin-top: 6px;
            scroll-snap-type: x mandatory
        }

        .preview-strip::-webkit-scrollbar {
            height: 6px
        }

        .preview-strip::-webkit-scrollbar-thumb {
            background: rgba(148,163,184,.7);
            border-radius: 999px
        }

        .prev-item {
            min-width: 180px;
            max-width: 220px;
            scroll-snap-align: start;
            border-radius: 12px;
            border: 1px solid rgba(148,163,184,.45);
            background: #020617;
            padding: 6px;
            font-size: 11px
        }

        .prev-item img, .prev-item video {
            width: 100%;
            border-radius: 8px;
            display: block
        }

        footer {
            text-align: center;
            font-size: 11px;
            opacity: .75;
            padding: 10px 0 14px
        }

        /* ====== ุฑุณูพุงูุณู ====== */
        @media(max-width: 800px) {
            .row {
                grid-template-columns: 1fr;
            }

            main {
                padding: 0 8px 18px;
            }

            .brand-sub {
                max-width: 160px;
            }
        }

        @media(max-width: 640px) {
            .menu-toggle {
                display: flex;
            }

            .header-actions {
                display: none;
            }

            .brand-main {
                font-size: 16px;
            }
        }

        @media(min-width: 641px) {
            .header-actions-panel {
                display: none !important;
            }

            header {
                flex-wrap: nowrap;
            }

            .header-actions-desktop {
                display: flex;
                align-items: center;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="wrap">

        <header>
            <div class="brand">
                <div class="logo"></div>
                <div>
                    <p class="brand-main">ูพูู ูุฏุฑุช ุขูุง ุฒุฑุงุจ</p>
                    <p class="brand-sub">ูุฏุฑุช ูุฏููุงุ ุชุตุงูุฑุ ฺฉุชุงุจโูุง ู ูุญุชูุง ุขููุฒุด</p>
                </div>
            </div>

            <!-- ุฏฺฉูู ููู ููุจุฑฺฏุฑ ุจุฑุง ููุจุงู -->
            <button id="menuToggle" class="menu-toggle" aria-label="ุจุงุฒ ฺฉุฑุฏู ููู">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <!-- ุงฺฉุดูโูุง ูุฏุฑ ุฑู ุฏุณฺฉุชุงูพ -->
            <div class="header-actions header-actions-desktop">
                <span id="adminChip" class="admin-chip">ูุถุนุช: ุฎุงุฑุฌ ุงุฒ ุณุณุชู</span>
                <button id="btnLogout" class="btn" style="display:none">ุฎุฑูุฌ</button>
            </div>
        </header>

        <!-- ูพูู ฺฉุดู ููุจุงู -->
        <div id="headerActionsPanel" class="header-actions-panel">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px;">
                <span id="adminChipMobile" class="admin-chip">ูุถุนุช: ุฎุงุฑุฌ ุงุฒ ุณุณุชู</span>
                <button id="btnLogoutMobile" class="btn" style="display:none">ุฎุฑูุฌ</button>
            </div>
            <nav class="header-nav">
                <a href="#brandingCard">ููฺฏู ู ูพุฑููุงู ุงุณุงุชุฏ</a>
                <a href="#loginCard">ูุฑูุฏ ุงุฏูู</a>
                <a href="#introCard">ูุฏู ูุนุฑู</a>
                <a href="#teachersCard">ฺฏุงูุฑ ุงุณุงุชุฏ</a>
                <a href="#studentsCard">ฺฏุงูุฑ ููุฑุฌูุงู</a>
                <a href="#booksCard">ฺฉุชุงุจโูุง</a>
                <a href="#rulesCard">ฑฐ ูุฑูุงู ููุฑุฌู</a>
                <a href="#historyCard">ุชุงุฑุฎฺู ฺฏุชุงุฑ</a>
                <a href="#practiceCard">ูฺฉุงุช ุชูุฑู</a>
            </nav>
        </div>

        <main>

            <!-- ููฺฏู ู ุนฺฉุณ ูพุฑููุงู ุงุณุงุชุฏ -->
            <div class="card" id="brandingCard">
                <h2>๐จ ููฺฏู ุณุงุช ู ูพุฑููุงู ุงุณุงุชุฏ</h2>
                <p style="font-size:12px;opacity:.9">
                    ุฏุฑ ุงู ุจุฎุด ูโุชูุงูุฏ ุธุงูุฑ ุงุตู ุณุงุช ุฑุง ฺฉูุชุฑู ฺฉูุฏ. ููฺฏู ุขููุฒุดฺฏุงู ู ุนฺฉุณ ูพุฑููุงู ูุฑ ุงุณุชุงุฏ
                    ุงุฒ ูููโุฌุง ุชูุธู ูโุดูุฏ. ุงู ุชุตุงูุฑ ุฏุฑ ุตูุญู ุงุตู ุณุงุช ู ุจุฎุด ูุนุฑู ุงุณุงุชุฏ ููุงุด ุฏุงุฏู ูโุดููุฏ
                    ู ุชุฃุซุฑ ุฒุงุฏ ุฑู ุงููู ุจุฑุฏุงุดุช ูุฎุงุทุจ ุฏุงุฑูุฏ.
                </p>

                <div class="row" style="margin-top:8px">
                    <div>
                        <label>ููฺฏู ุณุงุช</label>
                        <input id="logoFile" class="input" type="file" accept="image/*" />
                        <p style="font-size:11px;opacity:.75">
                            ููฺฏู ูุฑุจุน ุง ุฏุงุฑูโุง ุจุง ูพุณโุฒููู ุชุฑู ุจูุชุฑ ุฑู ูุงูุจ ูุนู ุณุงุช ุฏุฏู ูโุดูุฏ.
                            ูพุดููุงุฏ: ุญุฏุงูู ตฑฒรตฑฒ ูพฺฉุณู.
                        </p>
                        <div style="margin-top:8px">
                            <button id="btnUploadLogo" class="btn btn-gold">ุขูพููุฏ ููฺฏู</button>
                        </div>
                        <div id="statusLogo" class="status"></div>
                    </div>
                    <div>
                        <label>ุนฺฉุณ ูพุฑููุงู ุงุณุชุงุฏ</label>
                        <select id="avatarTeacherKey" class="input">
                            <option value="">-- ุงูุชุฎุงุจ ุงุณุชุงุฏ --</option>
                            <option value="manavi">ุงุณุชุงุฏ ูุนูู</option>
                            <option value="enayati">ุงุณุชุงุฏ ุนูุงุช</option>
                            <option value="talili">ุงุณุชุงุฏ ุนู ุชูู</option>
                        </select>
                        <input id="avatarFile" class="input" type="file" accept="image/*" style="margin-top:6px" />
                        <p style="font-size:11px;opacity:.75">
                            ุจุฑุง ูุฑ ุงุณุชุงุฏ ฺฉ ุชุตูุฑ ูพุฑุชุฑู (Headshot) ุจุง ููุฑ ููุงุณุจ ู ูพุณโุฒููู ุณุงุฏู ุงูุชุฎุงุจ ฺฉูุฏ ุชุง ุญุณ ุญุฑููโุง ุจูุฏู
                            ูุฌููุนู ุจูุชุฑ ููุชูู ุดูุฏ.
                        </p>
                        <div style="margin-top:8px">
                            <button id="btnUploadAvatar" class="btn btn-gold">ุขูพููุฏ ุนฺฉุณ ูพุฑููุงู</button>
                        </div>
                        <div id="statusAvatar" class="status"></div>
                    </div>
                </div>

                <h3 style="margin-top:14px">ูพุดโููุงุด</h3>
                <p style="font-size:11px;opacity:.8">
                    ุฏุฑ ุงู ูุณูุช ุขุฎุฑู ูุณุฎูโ ููฺฏู ู ุขูุงุชุงุฑ ุงุณุงุชุฏ ุฑุง ูโุจูุฏ ุชุง ูุทูุฆู ุดูุฏ ุฑู ุฏุณุชฺฏุงูโูุง ูุฎุชูู ุฏุฑุณุช
                    ููุงุด ุฏุงุฏู ูโุดูุฏ.
                </p>
                <div class="preview-strip" id="brandingPreview"></div>
            </div>

            <!-- ูุฑูุฏ ุงุฏูู -->
            <div class="card" id="loginCard">
                <h2>๐ ูุฑูุฏ ุงุฏูู</h2>
                <p style="font-size:12px;opacity:.85">
                    ุจุฑุง ุงููุช ุงุทูุงุนุงุช ุขููุฒุดฺฏุงูุ ุฏุณุชุฑุณ ุจู ุงู ูพูู ููุท ุงุฒ ุทุฑู ุญุณุงุจ ุงุฏูู ุงูุฌุงู ูโุดูุฏ.
                    ุงูู ู ุฑูุฒ ุนุจูุฑ ุงุฏูู ุฏุฑ ูุงู <code>appsettings.json</code> ู ุจุฎุด <code>Admin</code> ุชูุธู ูโฺฏุฑุฏุฏ.
                </p>
                <p style="font-size:12px;opacity:.85">
                    ูพุณ ุงุฒ ูุฑูุฏุ ูโุชูุงูุฏ ูุฏููุงุ ุชุตุงูุฑุ ฺฉุชุงุจโูุง ู ูุชูโูุง ุขููุฒุด ุฑุง ูุฏุฑุช ฺฉูุฏ. ุฏุฑ ุตูุฑุช ูุฑุงููุด ุฑูุฒ ุนุจูุฑุ
                    ุจุงุฏ ุขู ุฑุง ุงุฒ ุณูุช ุณุฑูุฑ (ูุงู ุชูุธูุงุช) ุชุบุฑ ุฏูุฏ.
                </p>
                <div class="row" style="margin-top:8px">
                    <div>
                        <label>ุงูู ุงุฏูู</label>
                        <input id="adminEmail" class="input" type="email" placeholder="admin@example.com" />
                    </div>
                    <div>
                        <label>ุฑูุฒ ุนุจูุฑ ุงุฏูู</label>
                        <input id="adminPass" class="input" type="password" placeholder="โขโขโขโขโขโขโขโข" />
                    </div>
                </div>
                <div style="margin-top:10px">
                    <button id="btnAdminLogin" class="btn btn-gold">ูุฑูุฏ ุจู ูพูู ูุฏุฑุช</button>
                </div>
                <div id="statusLogin" class="status"></div>
            </div>

            <!-- ูพูู ูุฏุฑุช -->
            <div id="adminPanel" style="display:none">

                <!-- ูุนุฑู -->
                <div class="card" id="introCard">
                    <h2>๐ฌ ูุฏู ู ูพูุณุชุฑ ูุนุฑู ูุฌููุนู</h2>
                    <p style="font-size:12px;opacity:.9">
                        ูุฏู ู ูพูุณุชุฑ ูุนุฑูุ ูุชุฑู ุขููุฒุดฺฏุงู ุดูุงุณุช. ููุฑุฌู ุฌุฏุฏ ูุนูููุงู ูุจู ุงุฒ ูุฑ ุชุตููุ
                        ุงู ุจุฎุด ุฑุง ูโุจูุฏ. ุณุน ฺฉูุฏ ุฏุฑ ูุฏู ูุนุฑูุ ูุถุง ุขููุฒุดฺฏุงูุ ุงุณุงุชุฏ ู ฺูุฏ ููููู ุงุฒ
                        ุงุฌุฑุง ููุฑุฌูุงู ุฑุง ูุดุงู ุฏูุฏ.
                    </p>
                    <p style="font-size:12px;opacity:.85">
                        ูพูุณุชุฑ ูุนุฑู ูุฒ ุฏุฑ ุตูุญู ุงููุ ุดุจฺฉูโูุง ุงุฌุชูุงุน ู ุจูุฑูุง ุชุจูุบุงุช ุงุณุชูุงุฏู ูโุดูุฏ.
                        ุจูุชุฑ ุงุณุช ุงุทูุงุนุงุช ูุซู ูุงู ุขููุฒุดฺฏุงูุ ุดุนุงุฑ ฺฉูุชุงูุ ู ุณุจฺฉโูุง ุขููุฒุด (ูุซูุงู: ฺฏุชุงุฑ ฺฉูุงุณฺฉุ ูพุงูพุ ุชุฆูุฑ ููุณู)
                        ุฑู ุขู ูุดุฎุต ุจุงุดุฏ.
                    </p>
                    <div class="row" style="margin-top:8px">
                        <div>
                            <label>ุงูุชุฎุงุจ ูุฏู ูุนุฑู (MP4, WebM,...)</label>
                            <input id="introVideoFile" class="input" type="file" accept="video/*" />
                            <p style="font-size:11px;opacity:.75">
                                ูพุดููุงุฏ ูโุดูุฏ ูุฏู ุจู ณฐ ุชุง นฐ ุซุงูู ุจุงุดุฏ ุชุง ุฑู ููุจุงู ูู ุจูโุฑุงุญุช ุฏุฏู ุดูุฏ.
                            </p>
                            <div style="margin-top:8px">
                                <button id="btnUploadIntroVideo" class="btn btn-gold">ุขูพููุฏ ูุฏู ูุนุฑู</button>
                            </div>
                            <div id="statusIntroVideo" class="status"></div>
                        </div>
                        <div>
                            <label>ุงูุชุฎุงุจ ูพูุณุชุฑ ูุนุฑู (ุนฺฉุณ)</label>
                            <input id="introPosterFile" class="input" type="file" accept="image/*" />
                            <p style="font-size:11px;opacity:.75">
                                ุจุฑุง ูุถูุญ ููุงุณุจ ุฑู ูุงูุชูุฑ ู ููุจุงูุ ุจูุชุฑ ุงุณุช ุญุฏุงูู ุนุฑุถ ุชุตูุฑ ฑฐธฐ ูพฺฉุณู ุจุงุดุฏ.
                            </p>
                            <div style="margin-top:8px">
                                <button id="btnUploadIntroPoster" class="btn btn-gold">ุขูพููุฏ ูพูุณุชุฑ</button>
                            </div>
                            <div id="statusIntroPoster" class="status"></div>
                        </div>
                    </div>
                    <h3 style="margin-top:14px">ูพุดโููุงุด ูุนู</h3>
                    <p style="font-size:11px;opacity:.8">
                        ุขุฎุฑู ูุฏู ู ูพูุณุชุฑ ุซุจุชโุดุฏู ุฏุฑ ุงู ูุณูุช ููุงุด ุฏุงุฏู ูโุดููุฏ. ุงฺฏุฑ ุฑู ููุจุงู ุจูโุฏุฑุณุช ุจุงุฒ ูุดุฏูุฏุ
                        ุญุฌู ุง ูุฑูุช ูุงู ุฑุง ุจุฑุฑุณ ฺฉูุฏ.
                    </p>
                    <div id="introPreview" class="preview-strip"></div>
                </div>

                <!-- ูุฏุง ุงุณุงุชุฏ -->
                <div class="card" id="teachersCard">
                    <h2>๐ฉโ๐ซ ฺฏุงูุฑ ุงุณุงุชุฏ</h2>
                    <p style="font-size:12px;opacity:.9">
                        ฺฏุงูุฑ ุงุณุงุชุฏ ุฌุง ุงุณุช ฺฉู ููุฑุฌูุงู ูโุชูุงููุฏ ูููููโ ุชุฏุฑุณ ู ุงุฌุฑุงูุง ุงุณุงุชุฏ ุฑุง ุจุจููุฏ.
                        ุฏุฑ ุงู ุจุฎุด ูโุชูุงูุฏ ุจุฑุง ูุฑ ุงุณุชุงุฏุ ูุฏููุง ฺฉูุชุงูุ ุนฺฉุณ ุงุฒ ฺฉูุงุณุ ุง ุงุฌุฑุง ุตุญููโุง ุงุถุงูู ฺฉูุฏ.
                    </p>
                    <p style="font-size:12px;opacity:.9">
                        ูพุดููุงุฏ ูโุดูุฏ ุจุฑุง ูุฑ ุงุณุชุงุฏ:
                        <br/>โข ฺฉ ูุฏู ูุนุฑู ฺฉูุชุงู (ุณูุงู ู ูุนุฑู ุณุจฺฉ ฺฉุงุฑ)
                        <br/>โข ฺฉ ุฏู ุงุฌุฑุง ฺฉุงูู ุง ุจุฎุด ุงุฒ ุงุฌุฑุง
                        <br/>โข ฺูุฏ ุนฺฉุณ ุงุฒ ูุถุง ฺฉูุงุณ
                        ุซุจุช ฺฉูุฏ ุชุง ููุฑุฌู ุฌุฏุฏ ุฑุงุญุชโุชุฑ ุจุชูุงูุฏ ุงูุชุฎุงุจ ฺฉูุฏ.
                    </p>

                    <div class="row" style="margin-top:8px">
                        <div>
                            <label>ุงูุชุฎุงุจ ุงุณุชุงุฏ</label>
                            <select id="teacherName" class="input">
                                <option value="">-- ุงูุชุฎุงุจ ฺฉูุฏ --</option>
                                <option value="ุงุณุชุงุฏ ูุนูู" data-key="manavi">ุงุณุชุงุฏ ูุนูู</option>
                                <option value="ุงุณุชุงุฏ ุนูุงุช" data-key="enayati">ุงุณุชุงุฏ ุนูุงุช</option>
                                <option value="ุงุณุชุงุฏ ุนู ุชูู" data-key="talili">ุงุณุชุงุฏ ุนู ุชูู</option>
                                <option value="_custom">ุณุงุฑ / ุงุณุชุงุฏ ูููุงู</option>
                            </select>
                            <input id="teacherNameCustom" class="input"
                                   style="margin-top:6px;display:none"
                                   placeholder="ูุงู ุงุณุชุงุฏ ุฏฺฏุฑ (ุฏุฑ ุตูุฑุช ุงูุชุฎุงุจ ฺฏุฒูู ุณุงุฑ)" />
                        </div>
                        <div>
                            <label>ุงูุชุฎุงุจ ูุงูโูุง (ุชุตูุฑ ุง ูุฏูุ ฺูุฏุชุง)</label>
                            <input id="teacherFiles" class="input" type="file" multiple accept="image/*,video/*" />
                            <p style="font-size:11px;opacity:.75">
                                ูโุชูุงูุฏ ฺูุฏ ูุงู ุฑุง ููุฒูุงู ุงูุชุฎุงุจ ฺฉูุฏ. ุชุฑุชุจ ููุงุด ูุนูููุงู ุจุฑ ุงุณุงุณ ุชุงุฑุฎ ุซุจุช ุฎูุงูุฏ ุจูุฏ.
                            </p>
                        </div>
                    </div>
                    <div style="margin-top:8px">
                        <button id="btnUploadTeacherMedia" class="btn btn-gold">ุขูพููุฏ ูุฏุง ุงุณุชุงุฏ</button>
                    </div>
                    <div id="statusTeacher" class="status"></div>

                    <h3 style="margin-top:14px">ุขุฎุฑู ูุฏุง ุซุจุชโุดุฏู ุงุณุงุชุฏ</h3>
                    <p style="font-size:11px;opacity:.8">
                        ุจุฑุง ูุฑ ุขุชูุ ูุงู ุงุณุชุงุฏ ู ููุน ูุฏุง (ูุฏู ุง ุชุตูุฑ) ููุงุด ุฏุงุฏู ูโุดูุฏ. ุงู ูุณุช ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ
                        ุจุฏุงูุฏ ุขุฎุฑูโุจุงุฑ ฺู ฺุฒ ุจุฑุง ูุฑ ุงุณุชุงุฏ ุจุงุฑฺฏุฐุงุฑ ุดุฏู ุงุณุช.
                    </p>
                    <div id="teacherPreview" class="preview-strip"></div>
                </div>

                <!-- ููุฑุฌูุงู -->
                <div class="card" id="studentsCard">
                    <h2>๐จโ๐ ฺฏุงูุฑ ููุฑุฌูุงู</h2>
                    <p style="font-size:12px;opacity:.9">
                        ฺฏุงูุฑ ููุฑุฌูุงู vitrinู ุฑุดุฏ ููุฑุฌููุงุณุช. ูโุชูุงูุฏ ุงุฌุฑุงูุง ฺฉูุงุณุ ุถุจุทโูุง ุชูุฑูุ ุง ุชุตุงูุฑ
                        ุงุฒ ฺฉูุณุฑุชโูุง ู ุฌุดู ูพุงุงู ุชุฑู ุฑุง ุงูุฌุง ุซุจุช ฺฉูุฏ. ุงู ุจุฎุด ูู ุจุฑุง ููุฑุฌู ูุนู ุงูฺฏุฒูโุณุงุฒ ุงุณุชุ
                        ูู ุจุฑุง ููุฑุฌู ุฌุฏุฏ ุงููุงูโุจุฎุด.
                    </p>
                    <p style="font-size:12px;opacity:.9">
                        ุชูุถุญ ฺฉูุชุงู (Caption) ุฑุง ุทูุฑ ุจููุณุฏ ฺฉู ูุงู ฺฉูุงุณุ ุงุณุชุงุฏ ู ุณุทุญ ููุฑุฌูุงู ูุดุฎุต ุจุงุดุฏุ
                        ูุซูุงู: ยซุงุฌุฑุง ููุฑุฌูุงู ฺฏุชุงุฑ ฺฉูุงุณฺฉ โ ุณุทุญ ูุชูุณุท โ ุงุณุชุงุฏ ูุนููยป.
                    </p>
                    <div class="row" style="margin-top:8px">
                        <div>
                            <label>ุชูุถุญ ฺฉูุชุงู (ุงุฎุชุงุฑ)</label>
                            <input id="studentCaption" class="input" placeholder="ูุซูุงู: ุงุฌุฑุง ููุฑุฌูุงู ฺฉูุงุณ ฺฏุชุงุฑ" />
                        </div>
                        <div>
                            <label>ุงูุชุฎุงุจ ูุงูโูุง (ุชุตูุฑ ุง ูุฏูุ ฺูุฏุชุง)</label>
                            <input id="studentFiles" class="input" type="file" multiple accept="image/*,video/*" />
                        </div>
                    </div>
                    <div style="margin-top:8px">
                        <button id="btnUploadStudentMedia" class="btn btn-gold">ุขูพููุฏ ูุฏุง ููุฑุฌูุงู</button>
                    </div>
                    <div id="statusStudent" class="status"></div>
                    <h3 style="margin-top:14px">ุขุฎุฑู ูุฏุง ุซุจุชโุดุฏู ููุฑุฌูุงู</h3>
                    <p style="font-size:11px;opacity:.8">
                        ุฏุฑ ุงู ุจุฎุด ุขุฎุฑู ุนฺฉุณโูุง ู ูุฏููุง ููุฑุฌูุงู ุฑุง ูโุจูุฏ. ุงฺฏุฑ ฺฉูพุดู ุฏุงุดุชู ุจุงุดูุฏ ุฒุฑ ูุงู ุขุชู ููุงุด ุฏุงุฏู ูโุดูุฏ.
                    </p>
                    <div id="studentPreview" class="preview-strip"></div>
                </div>

                <!-- ฺฉุชุงุจโูุง -->
                <div class="card" id="booksCard">
                    <h2>๐ ุซุจุช ฺฉุชุงุจโูุง ุขููุฒุด</h2>
                    <p style="font-size:12px;opacity:.9">
                        ุงุฒ ุงู ุจุฎุด ูโุชูุงูุฏ ฺฉุชุงุจโูุง ุขููุฒุด ููุฑุฏ ุงุณุชูุงุฏู ุฏุฑ ุขููุฒุดฺฏุงู ุฑุง ุซุจุช ู ูุฏุฑุช ฺฉูุฏ.
                        ูุฑ ฺฉุชุงุจ ูโุชูุงูุฏ ุดุงูู ุนููุงูุ ุณุทุญ ูพุดููุงุฏุ ููุช ู ููฺฉ PDF (ุจุฑุง ูุณุฎู ุฏุฌุชุงู ุง ููููู ฺูุฏ ุตูุญู) ุจุงุดุฏ.
                    </p>
                    <p style="font-size:12px;opacity:.9">
                        ุณุทุญ ฺฉุชุงุจ ฺฉูฺฉ ูโฺฉูุฏ ููุฑุฌู ุจุฏุงูุฏ ุงู ููุจุน ุจุฑุง ุดุฑูุน ููุงุณุจ ุงุณุช ุง ุจุฑุง ุชฺฉูู ููุงุฑุช.
                        ูุซูุงู: ยซูุจุชุฏยปุ ยซูุชูุณุทยปุ ยซูพุดุฑูุชูยป ุง ยซููุฑุงู ุจุง ุชูุฑู ุฑูุฒุงููยป.
                    </p>
                    <div class="row" style="margin-top:8px">
                        <div>
                            <label>ุนููุงู ฺฉุชุงุจ</label>
                            <input id="bookTitle" class="input" placeholder="ูุซูุงู: ูุชุฏ ฺฏุชุงุฑ ฺฉูุงุณฺฉ ุฌูุฏ ฑ" />
                        </div>
                        <div>
                            <label>ุณุทุญ (ุงุฎุชุงุฑ)</label>
                            <input id="bookLevel" class="input" placeholder="ูุจุชุฏ / ูุชูุณุท / ูพุดุฑูุชู" />
                        </div>
                    </div>
                    <div class="row" style="margin-top:8px">
                        <div>
                            <label>ููุช (ุชููุงู)</label>
                            <input id="bookPrice" class="input" type="number" min="0" step="1000" placeholder="ูุซูุงู: 150000" />
                        </div>
                        <div>
                            <label>ุขุฏุฑุณ PDF ฺฉุชุงุจ</label>
                            <input id="bookPdfUrl" class="input" placeholder="/uploads/books/book1.pdf ุง ููฺฉ ฺฉุงูู https://..." />
                        </div>
                    </div>
                    <div style="margin-top:8px">
                        <button id="btnAddBook" class="btn btn-gold">ุซุจุช ฺฉุชุงุจ</button>
                    </div>
                    <div id="statusBook" class="status"></div>
                    <h3 style="margin-top:14px">ฺฉุชุงุจโูุง ุซุจุชโุดุฏู</h3>
                    <p style="font-size:11px;opacity:.8">
                        ุงู ูุณุช ุฑุง ูโุชูุงูุฏ ุฏุฑ ุตูุญู ยซฺฉุชุงุจุฎุงููยป ุง ยซููุงุจุน ุขููุฒุดยป ุจู ููุฑุฌูุงู ููุงุด ุฏูุฏ. ููฺฉ PDF
                        ูโุชูุงูุฏ ูุณุฎู ฺฉุงูู ุง ูููููโ ฺูุฏ ุตูุญูโุง ุจุงุดุฏ.
                    </p>
                    <div id="booksPreview" class="preview-strip"></div>
                </div>

                <!-- =========  ุจุฎุดโูุง ูุญุชูุง (ฑฐ ูุฑูุงูุ ุชุงุฑุฎฺูุ ูฺฉุงุช ุชูุฑู) ========= -->

                <!-- ฑฐ ูุฑูุงู ููุฑุฌู ฺฏุชุงุฑ -->
                <div class="card" id="rulesCard">
                    <h2>๐ ฑฐ ูุฑูุงู ููุฑุฌู ฺฏุชุงุฑ</h2>
                    <p style="font-size:12px;opacity:.9">
                        ุงู ูุชู ุฑุง ูโุชูุงูุฏ ุฏุฑ ุตูุญูโ ยซููุงูู ู ุชูุตูโูุงยป ุง ุฏุฑ ุจุฎุด ูุนุฑู ููุฑุฌูุงู ุงุณุชูุงุฏู ฺฉูุฏ.
                        ูุฏู ุงู ฑฐ ูุฑูุงูุ ฺฉูฺฉ ุจู ุดฺฉูโฺฏุฑ ุนุงุฏุชโูุง ุฏุฑุณุช ุฏุฑ ูุณุฑ ุงุฏฺฏุฑ ููุณู ุงุณุช.
                    </p>
                    <ol style="font-size:12px;line-height:2;padding-right:18px;margin-top:8px;">
                        <li><b>ูุฑ ุฑูุฒ ฺฉูโฺฉู ุชูุฑู ฺฉูุ ูู ฺฏุงู ุฒุงุฏ:</b> ุชูุฑู ุฑูุฒุงูู ุญุช ฑต ุชุง ฒฐ ุฏูููุ ุงุฒ ุชูุฑู ุณูฺฏู ููุชฺฏ ููุซุฑุชุฑ ุงุณุช.</li>
                        <li><b>ฺฏุฑู ฺฉุฑุฏู ุฏุณุชโูุง ุฑุง ุฌุฏ ุจฺฏุฑ:</b> ูุจู ุงุฒ ุฒุฏู ูุทุนุงุชุ ฺูุฏ ุฏููู ุชูุฑู ุชฺฉูฺฉ ู ฺฉุดุด ุงูฺฏุดุชุงู ุงูุฌุงู ุจุฏู ุชุง ุฏุณุชุช ุขุณุจ ูุจูุฏ.</li>
                        <li><b>ุจ็ผ ุดุฑูุน ฺฉูุ ุจุนุฏ ุณุฑุนุช ุจฺฏุฑ:</b> ูุทุนู ุฑุง ุงูู ุจุง ุณุฑุนุช ูพุงู ู ุจุฏูู ุงุดุชุจุงู ุจุฒูุ ููุช ุชูุฒ ุดุฏุ ฺฉูโฺฉู ุณุฑุนุช ุฑุง ุจุงูุง ุจุจุฑ.</li>
                        <li><b>ุจุง ูุชุฑูููู ุฏูุณุช ุดู:</b> ูุชุฑูููู ุฏุดูู ุชู ูุณุชุ ุจูุชุฑู ุฏูุณุช ุชู ุจุฑุง ุฏุงุดุชู ุฑุชู ุฏูู ู ุญุฑููโุง ุงุณุช.</li>
                        <li><b>ฺฉูุช ูููโุชุฑ ุงุฒ ฺฉูุช ุงุณุช:</b> ฺฉ ุชูุฑู ุฏุฑุณุชุ ุจูุชุฑ ุงุฒ ุฏู ุจุงุฑ ุชฺฉุฑุงุฑ ุงุดุชุจุงู ููุงู ุชูุฑู ุงุณุช.</li>
                        <li><b>ุตุฏุง ู ูุฑู ุจุฏู ุฑุง ฺฏูุด ฺฉู:</b> ููุท ุจู ุงูฺฏุดุชโูุง ูฺฏุงู ูฺฉูุ ุจู ุตุฏุง ุณุงุฒ ู ุฑุงุญุช ุดุงููุ ฺฉูุฑ ู ฺฏุฑุฏู ูู ุชูุฌู ฺฉู.</li>
                        <li><b>ุงุดุชุจุงู ฺฉุฑุฏู ุทุจุน ุงุณุช:</b> ุชูุงุด ฺฉู ุงุฒ ูุฑ ุงุดุชุจุงูุ ฺฉ ุฏุฑุณ ุจฺฏุฑุ ุงุดุชุจุงู ุนู ยซููุทูโุง ฺฉู ุจุงุฏ ุจุดุชุฑ ุฑู ุขู ฺฉุงุฑ ฺฉูยป.</li>
                        <li><b>ูุฏูุช ุฑุง ูุดุฎุต ฺฉู:</b> ุจููุณ ฺุฑุง ูโุฎูุงู ฺฏุชุงุฑ ุจุฒู: ุจุฑุง ูุฐุช ุดุฎุตุ ุงุฌุฑุง ุฑู ุตุญููุ ุขููฺฏุณุงุฒ ุง ูุฑ ูุฏู ุฏฺฏุฑ.</li>
                        <li><b>ุงุฒ ูุนูู ุณูุงู ุจูพุฑุณ:</b> ูุฑ ุฌุง ฺุฒ ุฑุง ูุชูุฌู ูุดุฏุ ุงุฏุฏุงุดุช ฺฉู ู ุฏุฑ ุฌูุณู ุจุนุฏ ุงุฒ ุงุณุชุงุฏ ุจูพุฑุณุ ุณฺฉูุชุ ุณุฑุนุช ูพุดุฑูุช ุฑุง ฺฉู ูโฺฉูุฏ.</li>
                        <li><b>ุงุฒ ูุณุฑ ูุฐุช ุจุจุฑุ ูู ููุท ุงุฒ ูุชุฌู:</b> ุงุฏฺฏุฑ ููุณู ฺฉ ุณูุฑ ุทููุงู ุงุณุช. ูุฑ ูุฏู ฺฉูฺฺฉุ ุฎูุฏุด ฺฉ ูพุฑูุฒ ุงุณุช.</li>
                    </ol>
                </div>

                <!-- ุชุงุฑุฎฺู ฺฏุชุงุฑ -->
                <div class="card" id="historyCard">
                    <h2>๐ผ ุชุงุฑุฎฺู ฺฉูุชุงู ฺฏุชุงุฑ</h2>
                    <p style="font-size:12px;opacity:.9">
                        ุงู ูุชู ุจุฑุง ุตูุญู ยซุฏุฑุจุงุฑู ฺฏุชุงุฑยป ุง ุจุฎุด ูุนุฑู ุณุงุฒูุง ููุงุณุจ ุงุณุช. ูโุชูุงูุฏ ุขู ุฑุง ุนูุงู ุฏุฑ ุณุงุช ููุงุด ุฏูุฏ
                        ุง ุจุฎุดโูุง ุงุฒ ุขู ุฑุง ุฏุฑ ุตูุญุงุช ูุฎุชูู ุงุณุชูุงุฏู ฺฉูุฏ.
                    </p>
                    <p style="font-size:12px;opacity:.9">
                        ฺฏุชุงุฑ ฺฉ ุงุฒ ูุญุจูุจโุชุฑู ุณุงุฒูุง ุฒูู ุงูุฑูุฒ ุฏูุงุณุชุ ุงูุง ุฑุดูโูุง ุขู ุจู ฺูุฏ ูุฒุงุฑ ุณุงู ูุจู ุจุฑูโฺฏุฑุฏุฏ.
                        ุณุงุฒูุง ูุงููุฏ ุนูุฏุ ููุช ู ููโููุง ุฏุฑ ูุฑูู ูุฎุชููุ ุงุฌุฏุงุฏ ฺฏุชุงุฑ ุงูุฑูุฒ ุจู ุญุณุงุจ ูโุขูุฏ.
                    </p>
                    <p style="font-size:12px;opacity:.9">
                        ุดฺฉู ูุฏุฑู ฺฏุชุงุฑ ฺฉูุงุณฺฉ ุฏุฑ ูุฑู ููุฒุฏูู ู ุฏุฑ ุงุณูพุงูุง ุชุซุจุช ุดุฏุ ุฌุง ฺฉู ุณุงุฒูุฏฺฏุงู ุจุฒุฑฺฏ ูุซู
                        ยซุขูุชููู ุชูุฑุณยป ุงูุฏุงุฒูุ ูุฑู ุจุฏูู ู ุณุงุฎุชุงุฑ ุณูโูุง ุฑุง ุจู ฺุฒ ฺฉู ุงูุฑูุฒ ูโุดูุงุณู ูุฒุฏฺฉ ฺฉุฑุฏูุฏ.
                        ุจุนุฏ ุงุฒ ุขูุ ุจุง ุงุถุงูู ุดุฏู ฺฏุชุงุฑ ุขฺฉูุณุชฺฉ ู ุงูฺฉุชุฑฺฉุ ุงู ุณุงุฒ ูุงุฑุฏ ุณุจฺฉโูุง ูุฎุชูู ูุงููุฏ
                        ฺฉูุงุณฺฉุ ููุงููฺฉูุ ุฌุฒุ ุจููุฒุ ุฑุงฺฉ ู ูพุงูพ ุดุฏ.
                    </p>
                    <p style="font-size:12px;opacity:.9">
                        ุงูุฑูุฒู ฺฏุชุงุฑ ููโุชููุง ฺฉ ุณุงุฒ ููุฑุงู ุจุฑุง ุฎูุงููุฏู ุงุณุชุ ุจูฺฉู ุจูโุนููุงู ฺฉ ุณุงุฒ ุณููู (Solo) ู ุงุตู
                        ุฏุฑ ุจุณุงุฑ ุงุฒ ุณุจฺฉโูุง ุญุถูุฑ ุฏุงุฑุฏ. ุงุฒ ุงุฌุฑุง ูุทุนุงุช ฺฉูุงุณฺฉ ุฑู ุตุญูู ฺฏุฑูุชู ุชุง ุจุฏุงููโููุงุฒ ุฏุฑ ฺฉุงููโูุง
                        ู ุถุจุท ุงุณุชูุฏูุ ฺฏุชุงุฑ ฺฉ ุงุฒ ุงูุนุทุงูโูพุฐุฑุชุฑู ู ุตููโุชุฑู ุณุงุฒูุง ุจุฑุง ุจุงู ุงุญุณุงุณุงุช ุงูุณุงู ุงุณุช.
                    </p>
                </div>

                <!-- ูฺฉุงุช ุชูุฑู -->
                <div class="card" id="practiceCard">
                    <h2>๐ฏ ูฺฉุงุช ููู ุจุฑุง ุชูุฑู ูุคุซุฑ ฺฏุชุงุฑ</h2>
                    <p style="font-size:12px;opacity:.9">
                        ุงู ุจุฎุด ูโุชูุงูุฏ ุจูโุนููุงู ููุงูู ุขููุฒุด ุฏุฑ ูุจโุณุงุช ูุฑุงุฑ ุจฺฏุฑุฏ ุง ุจูโุตูุฑุช PDF ุจุฑุง ููุฑุฌูุงู ุงุฑุณุงู ุดูุฏ.
                        ูุฏู ุงู ูฺฉุงุชุ ฺฉูฺฉ ุจู ุจุฑูุงููโุฑุฒ ุชูุฑู ุฑูุฒุงูู ุงุณุช.
                    </p>
                    <ul style="font-size:12px;line-height:2;padding-right:18px;margin-top:8px;">
                        <li><b>ุฒูุงู ุชูุฑู ุฑุง ุซุงุจุช ูฺฏู ุฏุงุฑ:</b> ูุซูุงู ูุฑ ุฑูุฒ ุณุงุนุช ธ ุดุจุ ูุบุฒ ู ุนุถูุงุช ฺฉูโฺฉู ุจู ุงู ุนุงุฏุช ูพุงุณุฎ ุจูุชุฑ ูโุฏููุฏ.</li>
                        <li><b>ุชูุฑู ุฑุง ุจู ุจุฎุดโูุง ฺฉูฺฺฉ ุชูุณู ฺฉู:</b> ต ุฏููู ุชฺฉูฺฉุ ต ุฏููู ุฑุชูุ ฑฐ ุฏููู ูุทุนูุ ุจูโุฌุง ฒฐ ุฏููู ุฒุฏู ฺฉ ฺุฒ ุชฺฉุฑุงุฑ.</li>
                        <li><b>ุชูุฑู ุฑุง ุถุจุท ฺฉู:</b> ูุฑ ฺูุฏ ุฑูุฒ ฺฉโุจุงุฑ ุชูุฑูุช ุฑุง ุจุง ููุจุงู ุถุจุท ฺฉู ุชุง ูพุดุฑูุช ุฎูุฏุช ุฑุง ูุงุถุญ ุจุจู.</li>
                        <li><b>ูุญุท ุชูุฑู ุฑุง ุขูุงุฏู ฺฉู:</b> ุตูุฏู ููุงุณุจุ ููุฑ ุฎูุจ ู ุณฺฉูุช ูุณุจ ุจุงุนุซ ูโุดูุฏ ุญูุงุณโูพุฑุช ฺฉูุชุฑ ุดูุฏ.</li>
                        <li><b>ูุฏู ฺฉูุชุงูโูุฏุช ุชุนู ฺฉู:</b> ูุซูุงู ยซุชุง ุขุฎุฑ ุงู ููุชู ุงู ูุทุนู ุฑุง ุจุฏูู ุชููู ุชุง ุฎุท ธ ุชูุฑู ูโฺฉููยป.</li>
                        <li><b>ุจุฏู ุฑุง ุชุญุช ูุดุงุฑ ูฺฏุฐุงุฑ:</b> ุงฺฏุฑ ุงุญุณุงุณ ุฏุฑุฏ ุชุฒ ุง ุบุฑุนุงุฏ ุฏุฑ ูฺุ ุดุงูู ุง ฺฏุฑุฏู ุฏุงุดุชุ ุชูุฑู ุฑุง ูุทุน ฺฉู ู ุจุง ุงุณุชุงุฏ ูุดูุฑุช ฺฉู.</li>
                        <li><b>ุงุณุชุฑุงุญุชโูุง ฺฉูฺฺฉ ุจู ุชูุฑู:</b> ุจุนุฏ ุงุฒ ฒฐ ุฏูููุ ฒโณ ุฏููู ุฏุณุชโูุง ุฑุง ุฑูุง ู ฺฉู ุญุฑฺฉุช ฺฉุดุด ุงูุฌุงู ุจุฏู.</li>
                    </ul>
                </div>

            </div>

        </main>

        <footer>
            ยฉ ูพูู ูุฏุฑุช ุขููุฒุดฺฏุงู ููุณู ุขูุง ุฒุฑุงุจ
        </footer>
    </div>

    <script>
        const API_BASE = window.location.origin;
        const ADMIN_TOKEN_KEY = "adminToken";
        const $ = s => document.querySelector(s);

        function setStatus(el, msg, isErr) {
            if (!el) return;
            el.textContent = msg || "";
            el.className = "status " + (isErr ? "err" : "ok");
        }

        function getAdminToken() {
            return localStorage.getItem(ADMIN_TOKEN_KEY) || "";
        }

        // ููฺฏุงูโุณุงุฒ ูุถุนุช ูุฏุฑ ุฏุณฺฉุชุงูพ ู ููุจุงู
        function syncAdminHeaderUI(isLoggedIn) {
            const chipDesktop = $("#adminChip");
            const chipMobile = $("#adminChipMobile");
            const btnLogoutDesktop = $("#btnLogout");
            const btnLogoutMobile = $("#btnLogoutMobile");

            if (isLoggedIn) {
                if (chipDesktop) chipDesktop.textContent = "ูุถุนุช: ุงุฏูู ูุงุฑุฏ ุดุฏู ุงุณุช";
                if (chipMobile) chipMobile.textContent = "ูุถุนุช: ุงุฏูู ูุงุฑุฏ ุดุฏู ุงุณุช";
                if (btnLogoutDesktop) btnLogoutDesktop.style.display = "inline-block";
                if (btnLogoutMobile) btnLogoutMobile.style.display = "inline-block";
            } else {
                if (chipDesktop) chipDesktop.textContent = "ูุถุนุช: ุฎุงุฑุฌ ุงุฒ ุณุณุชู";
                if (chipMobile) chipMobile.textContent = "ูุถุนุช: ุฎุงุฑุฌ ุงุฒ ุณุณุชู";
                if (btnLogoutDesktop) btnLogoutDesktop.style.display = "none";
                if (btnLogoutMobile) btnLogoutMobile.style.display = "none";
            }
        }

        function applyAdminUI() {
            const token = getAdminToken();
            const loginCard = $("#loginCard");
            const adminPanel = $("#adminPanel");
            if (token) {
                if (loginCard) loginCard.style.display = "none";
                if (adminPanel) adminPanel.style.display = "block";
                syncAdminHeaderUI(true);
                loadIntroPreview();
                loadTeacherPreview();
                loadStudentPreview();
                loadBooksPreview();
            } else {
                if (loginCard) loginCard.style.display = "block";
                if (adminPanel) adminPanel.style.display = "none";
                syncAdminHeaderUI(false);
            }
        }

        // ููู ููุจุฑฺฏุฑ ููุจุงู
        const menuToggleBtn = document.getElementById("menuToggle");
        const headerActionsPanel = document.getElementById("headerActionsPanel");

        if (menuToggleBtn && headerActionsPanel) {
            menuToggleBtn.addEventListener("click", () => {
                const isOpen = headerActionsPanel.classList.toggle("open");
                menuToggleBtn.classList.toggle("active", isOpen);
            });

            headerActionsPanel.addEventListener("click", (e) => {
                if (e.target.tagName === "A") {
                    headerActionsPanel.classList.remove("open");
                    menuToggleBtn.classList.remove("active");
                }
            });
        }

        // logout ุฏุณฺฉุชุงูพ
        $("#btnLogout")?.addEventListener("click", () => {
            localStorage.removeItem(ADMIN_TOKEN_KEY);
            applyAdminUI();
        });

        // logout ููุจุงู
        $("#btnLogoutMobile")?.addEventListener("click", () => {
            localStorage.removeItem(ADMIN_TOKEN_KEY);
            applyAdminUI();
            headerActionsPanel?.classList.remove("open");
            menuToggleBtn?.classList.remove("active");
        });

        // ูุฑูุฏ ุงุฏูู
        $("#btnAdminLogin").addEventListener("click", async () => {
            const email = $("#adminEmail").value.trim();
            const password = $("#adminPass").value;
            const st = $("#statusLogin");
            setStatus(st, "", false);
            if (!email || !password) {
                setStatus(st, "ุงูู ู ุฑูุฒ ุฑุง ูุงุฑุฏ ฺฉูุฏ.", true);
                return;
            }
            try {
                const res = await fetch(`${API_BASE}/api/admin/login`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ email, password })
                });
                const data = await res.json();
                if (!res.ok) {
                    setStatus(st, data.message || "ูุฑูุฏ ุงุฏูู ูุงูููู ุจูุฏ.", true);
                    return;
                }
                localStorage.setItem(ADMIN_TOKEN_KEY, data.token);
                setStatus(st, "ูุฑูุฏ ูููู. ูพูู ูุฏุฑุช ูุนุงู ุดุฏ.", false);
                applyAdminUI();
            } catch {
                setStatus(st, "ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.", true);
            }
        });

        // ุขูพููุฏ ูุฏู ูุนุฑู
        $("#btnUploadIntroVideo").addEventListener("click", async () => {
            const fileInput = $("#introVideoFile");
            const st = $("#statusIntroVideo");
            setStatus(st, "", false);
            if (!getAdminToken()) {
                setStatus(st, "ุงุจุชุฏุง ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ.", true);
                return;
            }
            if (!fileInput.files || fileInput.files.length === 0) {
                setStatus(st, "ูฺ ูุงู ุงูุชุฎุงุจ ูุดุฏู ุงุณุช.", true);
                return;
            }
            const fd = new FormData();
            fd.append("file", fileInput.files[0]);
            try {
                const res = await fetch(`${API_BASE}/api/admin/upload-intro-video`, {
                    method: "POST",
                    headers: { "X-Admin-Token": getAdminToken() },
                    body: fd
                });
                const data = await res.json();
                if (!res.ok) {
                    setStatus(st, data.message || "ุฎุทุง ุฏุฑ ุขูพููุฏ ูุฏู.", true);
                    return;
                }
                setStatus(st, data.message || "ูุฏู ุจุง ููููุช ุฐุฎุฑู ุดุฏ.", false);
                fileInput.value = "";
                loadIntroPreview();
            } catch {
                setStatus(st, "ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.", true);
            }
        });

        // ุขูพููุฏ ูพูุณุชุฑ ูุนุฑู
        $("#btnUploadIntroPoster").addEventListener("click", async () => {
            const fileInput = $("#introPosterFile");
            const st = $("#statusIntroPoster");
            setStatus(st, "", false);
            if (!getAdminToken()) {
                setStatus(st, "ุงุจุชุฏุง ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ.", true);
                return;
            }
            if (!fileInput.files || fileInput.files.length === 0) {
                setStatus(st, "ูฺ ูุงู ุงูุชุฎุงุจ ูุดุฏู ุงุณุช.", true);
                return;
            }
            const fd = new FormData();
            fd.append("file", fileInput.files[0]);
            try {
                const res = await fetch(`${API_BASE}/api/admin/upload-intro-poster`, {
                    method: "POST",
                    headers: { "X-Admin-Token": getAdminToken() },
                    body: fd
                });
                const data = await res.json();
                if (!res.ok) {
                    setStatus(st, data.message || "ุฎุทุง ุฏุฑ ุขูพููุฏ ูพูุณุชุฑ.", true);
                    return;
                }
                setStatus(st, data.message || "ูพูุณุชุฑ ุจุง ููููุช ุฐุฎุฑู ุดุฏ.", false);
                fileInput.value = "";
                loadIntroPreview();
            } catch {
                setStatus(st, "ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.", true);
            }
        });

        // ูพุดโููุงุด ูุนุฑู
        async function loadIntroPreview() {
            const box = $("#introPreview");
            if (!box) return;
            box.innerHTML = "";
            try {
                const res = await fetch(`${API_BASE}/api/content`);
                if (!res.ok) return;
                const data = await res.json();
                const intro = data.intro || {};
                if (!intro.videoUrl && !intro.posterUrl) {
                    box.innerHTML = `<div class="prev-item">ูููุฒ ูุฏู ุง ูพูุณุชุฑ ูุนุฑู ุซุจุช ูุดุฏู ุงุณุช.</div>`;
                    return;
                }
                let html = "";
                if (intro.videoUrl) {
                    html += `
                        <div class="prev-item">
                            <b>ูุฏู ูุนุฑู</b>
                            <video controls preload="metadata" src="${intro.videoUrl}"></video>
                        </div>`;
                }
                if (intro.posterUrl) {
                    html += `
                        <div class="prev-item">
                            <b>ูพูุณุชุฑ ูุนุฑู</b>
                            <img src="${intro.posterUrl}" alt="ูพูุณุชุฑ ูุนุฑู">
                        </div>`;
                }
                box.innerHTML = html;
            } catch {
                box.innerHTML = `<div class="prev-item">ุฎุทุง ุฏุฑ ุฏุฑุงูุช ูพุดโููุงุด.</div>`;
            }
        }

        // ููุงุด input ุฏุณุช ููุช ฺฏุฒูู "ุณุงุฑ" ุงูุชุฎุงุจ ูโุดูุฏ
        const teacherSelect = document.getElementById("teacherName");
        const teacherCustom = document.getElementById("teacherNameCustom");
        teacherSelect.addEventListener("change", () => {
            if (teacherSelect.value === "_custom") {
                teacherCustom.style.display = "block";
            } else {
                teacherCustom.style.display = "none";
                teacherCustom.value = "";
            }
        });

        // ุขูพููุฏ ูุฏุง ุงุณุงุชุฏ
        document.getElementById("btnUploadTeacherMedia").addEventListener("click", async () => {
            const select = document.getElementById("teacherName");
            let name = select.value;
            if (name === "_custom") {
                name = teacherCustom.value.trim();
            }

            const filesInput = document.getElementById("teacherFiles");
            const st = document.getElementById("statusTeacher");
            setStatus(st, "", false);

            if (!getAdminToken()) {
                setStatus(st, "ุงุจุชุฏุง ุจูโุนููุงู ุงุฏูู ูุงุฑุฏ ุดูุฏ.", true);
                return;
            }
            if (!name) {
                setStatus(st, "ูุงู ุงุณุชุงุฏ ุฑุง ุงูุชุฎุงุจ ุง ูุงุฑุฏ ฺฉูุฏ.", true);
                return;
            }
            if (!filesInput.files || filesInput.files.length === 0) {
                setStatus(st, "ูฺ ูุงู ุงูุชุฎุงุจ ูุดุฏู ุงุณุช.", true);
                return;
            }

            const fd = new FormData();
            fd.append("teacherName", name);
            for (const f of filesInput.files) {
                fd.append("files", f);
            }

            try {
                const res = await fetch(`${API_BASE}/api/admin/teacher-media`, {
                    method: "POST",
                    headers: {
                        "X-Admin-Token": getAdminToken()
                    },
                    body: fd
                });
                const data = await res.json();
                if (!res.ok) {
                    setStatus(st, data.message || "ุฎุทุง ุฏุฑ ุขูพููุฏ ูุฏุง ุงุณุชุงุฏ.", true);
                    return;
                }
                setStatus(st, data.message || "ูุฏุง ุจุง ููููุช ุซุจุช ุดุฏ.", false);
                filesInput.value = "";
                loadTeacherPreview();
            } catch (e) {
                setStatus(st, "ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.", true);
            }
        });

        async function loadTeacherPreview() {
            const box = $("#teacherPreview");
            if (!box) return;
            box.innerHTML = "";
            try {
                const res = await fetch(`${API_BASE}/api/media/teachers`);
                if (!res.ok) {
                    box.innerHTML = `<div class="prev-item">ุฎุทุง ุฏุฑ ุฏุฑุงูุช ุงุทูุงุนุงุช.</div>`;
                    return;
                }
                const list = await res.json();
                if (!Array.isArray(list) || list.length === 0) {
                    box.innerHTML = `<div class="prev-item">ูุฏุง ุจุฑุง ุงุณุงุชุฏ ุซุจุช ูุดุฏู ุงุณุช.</div>`;
                    return;
                }
                box.innerHTML = list.map(m => `
                    <div class="prev-item">
                        <b>${m.teacherName || "ุงุณุชุงุฏ"}</b>
                        ${m.mediaType === "video"
                        ? `<video controls preload="metadata" src="${m.fileUrl}"></video>`
                        : `<img src="${m.fileUrl}" alt="${m.teacherName || "ุงุณุชุงุฏ"}">`}
                    </div>
                `).join("");
            } catch {
                box.innerHTML = `<div class="prev-item">ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.</div>`;
            }
        }

        // ุขูพููุฏ ููุฑุฌูุงู
        $("#btnUploadStudentMedia").addEventListener("click", async () => {
            const caption = $("#studentCaption").value.trim();
            const filesInput = $("#studentFiles");
            const st = $("#statusStudent");
            setStatus(st, "", false);
            if (!getAdminToken()) {
                setStatus(st, "ุงุจุชุฏุง ูุงุฑุฏ ุดูุฏ.", true);
                return;
            }
            if (!filesInput.files || filesInput.files.length === 0) {
                setStatus(st, "ูฺ ูุงู ุงูุชุฎุงุจ ูุดุฏู ุงุณุช.", true);
                return;
            }
            const fd = new FormData();
            if (caption) fd.append("caption", caption);
            for (const f of filesInput.files) {
                fd.append("files", f);
            }
            try {
                const res = await fetch(`${API_BASE}/api/admin/student-media`, {
                    method: "POST",
                    headers: { "X-Admin-Token": getAdminToken() },
                    body: fd
                });
                const data = await res.json();
                if (!res.ok) {
                    setStatus(st, data.message || "ุฎุทุง ุฏุฑ ุขูพููุฏ ูุฏุง ููุฑุฌูุงู.", true);
                    return;
                }
                setStatus(st, data.message || "ูุฏุง ููุฑุฌูุงู ุซุจุช ุดุฏ.", false);
                filesInput.value = "";
                loadStudentPreview();
            } catch {
                setStatus(st, "ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.", true);
            }
        });

        async function loadStudentPreview() {
            const box = $("#studentPreview");
            if (!box) return;
            box.innerHTML = "";
            try {
                const res = await fetch(`${API_BASE}/api/media/students`);
                if (!res.ok) {
                    box.innerHTML = `<div class="prev-item">ุฎุทุง ุฏุฑ ุฏุฑุงูุช ุงุทูุงุนุงุช.</div>`;
                    return;
                }
                const list = await res.json();
                if (!Array.isArray(list) || list.length === 0) {
                    box.innerHTML = `<div class="prev-item">ูุฏุง ุจุฑุง ููุฑุฌูุงู ุซุจุช ูุดุฏู ุงุณุช.</div>`;
                    return;
                }
                box.innerHTML = list.map(m => `
                    <div class="prev-item">
                        <b>${m.caption || "ุงุฌุฑุง ููุฑุฌูุงู"}</b>
                        ${m.mediaType === "video"
                        ? `<video controls preload="metadata" src="${m.fileUrl}"></video>`
                        : `<img src="${m.fileUrl}" alt="${m.caption || "ููุฑุฌู"}">`}
                    </div>
                `).join("");
            } catch {
                box.innerHTML = `<div class="prev-item">ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.</div>`;
            }
        }

        // ุขูพููุฏ ููฺฏู
        document.getElementById("btnUploadLogo").addEventListener("click", async () => {
            const fileInput = document.getElementById("logoFile");
            const st = document.getElementById("statusLogo");
            setStatus(st, "", false);

            if (!getAdminToken()) {
                setStatus(st, "ูุทูุงู ุงุจุชุฏุง ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ.", true);
                return;
            }
            if (!fileInput.files || fileInput.files.length === 0) {
                setStatus(st, "ูฺ ูุงู ุงูุชุฎุงุจ ูุดุฏู ุงุณุช.", true);
                return;
            }

            const fd = new FormData();
            fd.append("file", fileInput.files[0]);

            try {
                const res = await fetch(`${API_BASE}/api/admin/upload-logo`, {
                    method: "POST",
                    headers: { "X-Admin-Token": getAdminToken() },
                    body: fd
                });
                const data = await res.json();
                if (!res.ok) {
                    setStatus(st, data.message || "ุฎุทุง ุฏุฑ ุขูพููุฏ ููฺฏู.", true);
                    return;
                }
                setStatus(st, data.message || "ููฺฏู ุฐุฎุฑู ุดุฏ.", false);
                fileInput.value = "";
                loadBrandingPreview();
            } catch (e) {
                setStatus(st, "ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.", true);
            }
        });

        // ุขูพููุฏ ุนฺฉุณ ูพุฑููุงู ุงุณุชุงุฏ
        document.getElementById("btnUploadAvatar").addEventListener("click", async () => {
            const teacherKey = document.getElementById("avatarTeacherKey").value;
            const fileInput = document.getElementById("avatarFile");
            const st = document.getElementById("statusAvatar");
            setStatus(st, "", false);

            if (!getAdminToken()) {
                setStatus(st, "ูุทูุงู ุงุจุชุฏุง ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ.", true);
                return;
            }
            if (!teacherKey) {
                setStatus(st, "ุงุณุชุงุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.", true);
                return;
            }
            if (!fileInput.files || fileInput.files.length === 0) {
                setStatus(st, "ูฺ ูุงู ุงูุชุฎุงุจ ูุดุฏู ุงุณุช.", true);
                return;
            }

            const fd = new FormData();
            fd.append("teacherKey", teacherKey);
            fd.append("file", fileInput.files[0]);

            try {
                const res = await fetch(`${API_BASE}/api/admin/teacher-avatar`, {
                    method: "POST",
                    headers: { "X-Admin-Token": getAdminToken() },
                    body: fd
                });
                const data = await res.json();
                if (!res.ok) {
                    setStatus(st, data.message || "ุฎุทุง ุฏุฑ ุขูพููุฏ ุนฺฉุณ ูพุฑููุงู.", true);
                    return;
                }
                setStatus(st, data.message || "ุนฺฉุณ ูพุฑููุงู ุฐุฎุฑู ุดุฏ.", false);
                fileInput.value = "";
                loadBrandingPreview();
            } catch (e) {
                setStatus(st, "ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.", true);
            }
        });

        // ูพุดโููุงุด ููฺฏู ู ุขูุงุชุงุฑูุง
        async function loadBrandingPreview() {
            const box = document.getElementById("brandingPreview");
            if (!box) return;
            box.innerHTML = "";

            const items = [
                { title: "ููฺฏู ุณุงุช", url: "/uploads/branding/logo.png" },
                { title: "ุงุณุชุงุฏ ูุนูู", url: "/uploads/teachers/avatars/manavi.jpg" },
                { title: "ุงุณุชุงุฏ ุนูุงุช", url: "/uploads/teachers/avatars/enayati.jpg" },
                { title: "ุงุณุชุงุฏ ุนู ุชูู", url: "/uploads/teachers/avatars/talili.jpg" }
            ];

            let html = "";
            for (const it of items) {
                html += `
        <div class="prev-item">
          <b>${it.title}</b>
          <img src="${it.url}" onerror="this.style.display='none'" alt="${it.title}">
        </div>`;
            }
            box.innerHTML = html;
        }

        // ุซุจุช ฺฉุชุงุจ
        $("#btnAddBook").addEventListener("click", async () => {
            const title = $("#bookTitle").value.trim();
            const level = $("#bookLevel").value.trim();
            const priceStr = $("#bookPrice").value.trim();
            const pdfUrl = $("#bookPdfUrl").value.trim();
            const st = $("#statusBook");
            setStatus(st, "", false);
            if (!getAdminToken()) {
                setStatus(st, "ุงุจุชุฏุง ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ.", true);
                return;
            }
            if (!title || !pdfUrl) {
                setStatus(st, "ุนููุงู ู ุขุฏุฑุณ PDF ุฑุง ูุงุฑุฏ ฺฉูุฏ.", true);
                return;
            }
            const price = priceStr ? Number(priceStr) : 0;
            try {
                const res = await fetch(`${API_BASE}/api/admin/books`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-Admin-Token": getAdminToken()
                    },
                    body: JSON.stringify({ title, level: level || null, price, pdfUrl })
                });
                const data = await res.json();
                if (!res.ok) {
                    setStatus(st, data.message || "ุฎุทุง ุฏุฑ ุซุจุช ฺฉุชุงุจ.", true);
                    return;
                }
                setStatus(st, data.message || "ฺฉุชุงุจ ุซุจุช ุดุฏ.", false);
                $("#bookTitle").value = "";
                $("#bookLevel").value = "";
                $("#bookPrice").value = "";
                $("#bookPdfUrl").value = "";
                loadBooksPreview();
            } catch {
                setStatus(st, "ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.", true);
            }
        });

        async function loadBooksPreview() {
            const box = $("#booksPreview");
            if (!box) return;
            box.innerHTML = "";
            try {
                const res = await fetch(`${API_BASE}/api/books`);
                if (!res.ok) {
                    box.innerHTML = `<div class="prev-item">ุฎุทุง ุฏุฑ ุฏุฑุงูุช ฺฉุชุงุจโูุง.</div>`;
                    return;
                }
                const list = await res.json();
                if (!Array.isArray(list) || list.length === 0) {
                    box.innerHTML = `<div class="prev-item">ฺฉุชุงุจ ุซุจุช ูุดุฏู ุงุณุช.</div>`;
                    return;
                }
                box.innerHTML = list.map(b => `
                    <div class="prev-item">
                        <b>${b.title}</b><br>
                        ${b.level ? `<span>ุณุทุญ: ${b.level}</span><br>` : ""}
                        <span>ููุช: ${b.price} ุชููุงู</span><br>
                        <span style="font-size:10px;opacity:.8">PDF: ${b.pdfUrl}</span>
                    </div>
                `).join("");
            } catch {
                box.innerHTML = `<div class="prev-item">ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ.</div>`;
            }
        }

        // ุดุฑูุน
        applyAdminUI();
        loadBrandingPreview();
    </script>
</body>
    </html>
