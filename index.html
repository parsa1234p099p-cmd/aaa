<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>آوای زریاب — آکادمی موسیقی</title>

  <!-- فونت (گوگل فونت یا فونت محلی) -->
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #050507;
      --card: #0f1720;
      --primary: #203A56; /* سرمه‌ای - برگرفته از لوگو */
      --accent: #C9A04C;  /* طلایی لوگو */
      --muted: #97a3b0;
      --neon-glow: 0 8px 24px rgba(200,160,76,0.12);
      --radius: 14px;
    }

    /* Mobile-first */
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Vazirmatn", Tahoma, sans-serif;
      background: linear-gradient(180deg,#000 0%, #050507 100%);
      color:#e6eef6;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.5;
      padding-bottom:80px;
    }

    header{
      position:sticky;
      top:0;
      z-index:30;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(5,5,7,0.6), rgba(5,5,7,0.3));
      border-bottom: 1px solid rgba(255,255,255,0.03);
      padding:12px 14px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }

    .brand{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .brand img{
      width:56px;
      height:56px;
      object-fit:contain;
      filter: drop-shadow(0 6px 18px rgba(194,160,60,0.18));
    }
    .brand h1{
      margin:0;
      font-size:16px;
      letter-spacing:0.6px;
      color:var(--accent);
    }
    .nav{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .nav button{
      background:transparent;
      border:1px solid rgba(255,255,255,0.04);
      color:var(--muted);
      padding:8px 10px;
      border-radius:10px;
      font-size:13px;
    }
    .nav button.active{
      color:var(--accent);
      border-color: rgba(201,160,76,0.2);
      box-shadow: var(--neon-glow);
    }

    main{
      padding:18px 14px 100px;
      max-width:960px;
      margin:0 auto;
    }

    /* Hero */
    .hero{
      display:flex;
      gap:12px;
      align-items:flex-start;
      padding:18px;
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(32,58,86,0.12), rgba(201,160,76,0.02));
      border:1px solid rgba(201,160,76,0.04);
      box-shadow: 0 8px 30px rgba(32,58,86,0.08);
    }
    .hero .left{
      flex:1;
    }
    .hero h2{
      margin:0 0 8px 0;
      color:var(--accent);
      font-size:18px;
    }
    .hero p{margin:0;color:var(--muted);font-size:13px}

    .hero .cta{
      margin-top:12px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .btn{
      background:linear-gradient(90deg,var(--accent),#ffd87a);
      color:#08101b;
      padding:10px 14px;
      border-radius:12px;
      border:none;
      font-weight:700;
      box-shadow: 0 8px 20px rgba(201,160,76,0.12);
    }
    .ghost{
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      color:var(--muted);
    }

    /* Sections */
    section{
      margin-top:18px;
      padding:14px;
      border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      border:1px solid rgba(255,255,255,0.02);
    }
    h3{margin:0 0 10px 0;color:var(--accent)}
    .text-muted{color:var(--muted);font-size:13px}

    /* Teacher cards */
    .teachers{display:flex;gap:10px;overflow-x:auto;padding-bottom:8px}
    .teacher{
      min-width:180px;
      background:linear-gradient(180deg, rgba(32,58,86,0.04), rgba(0,0,0,0.02));
      padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.02);
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
      flex-shrink:0;
    }
    .teacher img{width:100%;height:110px;object-fit:cover;border-radius:8px;margin-bottom:8px}
    .teacher h4{margin:0;color:#eaf3ff;font-size:14px}
    .teacher p{margin:6px 0 0 0;color:var(--muted);font-size:12px}
    .teacher button{margin-top:8px;width:100%;padding:8px;border-radius:10px;border:none;background:var(--primary);color:#fff;font-weight:600}

    /* Gallery grid */
    .grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:8px;
    }
    .grid img, .grid video{
      width:100%;height:140px;object-fit:cover;border-radius:8px;
    }

    /* PDF embeds */
    .pdf-list{display:flex;flex-direction:column;gap:8px}
    .pdf-item{display:flex;gap:10px;align-items:center;justify-content:space-between}
    .pdf-item a{color:var(--accent);font-weight:600;text-decoration:none}

    /* Articles */
    article p{color:var(--muted);font-size:14px}

    /* Footer bar for mobile */
    .footer-nav{
      position:fixed;left:0;right:0;bottom:0;background:linear-gradient(0deg, rgba(0,0,0,0.6), rgba(0,0,0,0.2));
      border-top:1px solid rgba(255,255,255,0.03);
      display:flex;gap:4px;justify-content:space-around;padding:8px;height:64px;align-items:center;
    }
    .footer-nav button{background:transparent;border:none;color:var(--muted);font-size:12px}

    /* Teacher detail overlay */
    .overlay{
      position:fixed;inset:0;background:linear-gradient(180deg,rgba(2,6,23,0.85),rgba(2,6,23,0.92));
      display:none;align-items:flex-end;padding:18px;z-index:80;
    }
    .panel{
      width:100%;max-width:960px;background:linear-gradient(180deg,#071225,#071525);border-radius:16px;padding:14px;border:1px solid rgba(201,160,76,0.06)
    }
    .close-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:10px;color:var(--muted)}

    /* responsive tweaks for larger screens */
    @media(min-width:900px){
      main{padding:28px}
      .grid img, .grid video{height:200px}
      .teachers{overflow-x:unset;flex-wrap:wrap}
      .teacher{min-width:260px}
    }
  </style>
</head>
<body>

<header>
  <div class="brand">
    <!-- جایگزین تصویر لوگو: assets/logo.png -->
    <img src="assets/logo.png" alt="لوگو آوای زریاب" id="siteLogo">
    <div>
      <h1>آوای زریاب</h1>
      <div style="font-size:12px;color:var(--muted)">آکادمی موسیقی — گیتار و آواز</div>
    </div>
  </div>

  <nav class="nav" aria-label="منو">
    <button data-target="home" class="active">خانه</button>
    <button data-target="about">درباره</button>
    <button data-target="teachers">استادان</button>
    <button data-target="students">هنرجویان</button>
    <button data-target="solfege">سلفژ</button>
    <button data-target="articles">مطالب</button>
  </nav>
</header>

<main>
  <!-- HERO -->
  <section id="home" class="page">
    <div class="hero">
      <div class="left">
        <h2>آکادمی موسیقی آوای زریاب</h2>
        <p class="text-muted">آموزش گیتار، آواز و ترویج هنر با رویکردی نوآورانه؛ گالری استادان، ویدیوهای هنرجویان، و بخش‌های آموزشی حرفه‌ای.</p>

        <div class="cta">
          <button class="btn" onclick="openSection('teachers')">معرفی استادان</button>
          <button class="ghost" onclick="openSection('solfege')">سه رویکرد در سلفژ (PDF)</button>
          <button class="ghost" id="enableSoundBtn">فعال‌سازی صدا</button>
        </div>
      </div>

      <div style="width:140px;display:flex;align-items:center;justify-content:center">
        <!-- نمای بزرگی از لوگو (میخوای بزرگ‌تر باشه) -->
        <img src="assets/logo.png" alt="لوگو بزرگ" style="width:120px;filter:drop-shadow(0 10px 30px rgba(201,160,76,0.12));">
      </div>
    </div>

    <!-- کوتاه: نمونه از شبکه گالری کوچک -->
    <section style="margin-top:12px">
      <h3>نمونه آثار اخیر</h3>
      <div class="grid" id="homeGallery">
        <!-- تصاویر نمونه (با جاوااسکریپت پر می‌شود) -->
      </div>
    </section>
  </section>

  <!-- ABOUT -->
  <section id="about" class="page" style="display:none">
    <h3>تاریخچه و تحلیل ساز گیتار</h3>
    <article>
      <!-- متن طولانی که فرستادی اینجا قرار داده شد -->
      <p><strong>پیدایش تاریخی گیتار</strong></p>
      <p class="text-muted">ساز گیتار، یکی از پرنفوذترین سازهای زهی در تاریخ موسیقی، ریشه‌ای چند هزار ساله دارد... (متن کامل از ورودی کاربر)</p>

      <p><strong>نقش زریاب در تحول گیتار</strong></p>
      <p class="text-muted">زریاب (ابوالحسن علی ابن نافع) ...</p>

      <p><strong>چرا گیتار مهم است؟</strong></p>
      <p class="text-muted">گیتار به دلایل زیر یکی از مهم‌ترین سازهای جهان محسوب می‌شود: ...</p>

      <p><strong>بزرگان گیتار</strong></p>
      <p class="text-muted">آندرس سگوویا، پاکو دلوسیا، جیمی هندریکس، جان ویلیامز، اریک کلپتون ...</p>
    </article>
  </section>

  <!-- TEACHERS -->
  <section id="teachers" class="page" style="display:none">
    <h3>استادان</h3>
    <div class="teachers" id="teachersList">
      <!-- کارت‌ها با جاوا پر می‌شود -->
    </div>

    <div style="margin-top:12px">
      <h3>گالری مشترک استادان</h3>
      <div class="grid" id="teachersGallery">
        <!-- پر می‌شود -->
      </div>
    </div>
  </section>

  <!-- STUDENTS -->
  <section id="students" class="page" style="display:none">
    <h3>گالری هنرجویان</h3>
    <p class="text-muted">اینجا ویدیوها و عکس‌های هنرجویان مرتب و بر اساس استاد نمایش داده می‌شود.</p>

    <div id="studentsGrid" class="grid"></div>
  </section>

  <!-- SOLFEGE (PDFs) -->
  <section id="solfege" class="page" style="display:none">
    <h3>سه رویکرد کاربردی در سلفژ</h3>
    <p class="text-muted">در این بخش می‌توانید فایل‌های PDF آموزشی مربوط به هر رویکرد را مشاهده یا جایگزین کنید.</p>

    <div class="pdf-list" id="pdfList">
      <!-- آیتم‌ها از JS -->
    </div>

    <p class="text-muted" style="margin-top:8px;font-size:13px">راهنما: برای جایگزینی PDF، فایل‌های PDF را در پوشه <code>assets/pdfs/</code> قرار دهید و در آرایه `SolfgePdfs` در بخش جاوااسکریپت نام و مسیر آن را اضافه کنید.</p>
  </section>

  <!-- ARTICLES -->
  <section id="articles" class="page" style="display:none">
    <h3>مقالات و نکات</h3>

    <article>
      <h4>۱۰ نکته برای تبدیل شدن به یک نوازنده گیتار کلاسیک حرفه‌ای</h4>
      <p class="text-muted">۱. انتخاب ساز مناسب ... ۱۰. صبر و عشق به موسیقی ...</p>
    </article>

    <article style="margin-top:12px">
      <h4>اضطراب اجرا (Performance Anxiety)</h4>
      <p class="text-muted">توضیحات و راهکارهای عملی برای کنترل استرس اجرا ...</p>
    </article>
  </section>
</main>

<!-- Teacher detail overlay (برای هر استاد) -->
<div class="overlay" id="overlay">
  <div class="panel">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <h3 id="teacherName">استاد</h3>
        <div id="teacherBio" class="text-muted" style="font-size:13px">توضیحات استاد</div>
      </div>
      <div style="display:flex;gap:8px">
        <button class="close-btn" onclick="closeOverlay()">بستن ✕</button>
      </div>
    </div>

    <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0">

    <h4>آثار استاد</h4>
    <div id="teacherWorks" class="grid"></div>

    <h4 style="margin-top:12px">هنرجویان استاد</h4>
    <div id="teacherStudents" class="grid"></div>

    <p class="text-muted" style="margin-top:10px;font-size:13px">برای اضافه کردن عکس/ویدیو به این استاد، مسیر فایل‌ها را در آرایه `teachers` در ابتدای اسکریپت تغییر دهید (جزئیات در کامنت کد).</p>
  </div>
</div>

<!-- footer nav (mobile) -->
<div class="footer-nav">
  <button onclick="openSection('home')">خانه</button>
  <button onclick="openSection('teachers')">استادان</button>
  <button onclick="openSection('students')">هنرجویان</button>
  <button onclick="openSection('solfege')">سلفژ</button>
  <button onclick="openSection('articles')">مطالب</button>
</div>

<!-- اسکریپت -->
<script>
/* ========== داده‌های دمو ========== 
   جایگزین کن یا گسترش بده:
   - هر عکس/ویدیو را داخل پوشه assets/teachers/<teacher-id>/ قرار بده
   - هر PDF را داخل assets/pdfs/ قرار بده
   سپس آرایه‌ها را مطابق فایل‌های خودت آپدیت کن.
*/

const teachers = [
  {
    id: 'soheil-manavi',
    name: 'استاد سهیل معنوی',
    role: 'مربی گیتار',
    bio: 'متنی کوتاه درباره استاد سهیل معنوی — تخصص در گیتار کلاسیک و فلامنکو.',
    avatar: 'assets/teachers/soheil/avatar.jpg', // جایگزین کن
    works: [
      'assets/teachers/soheil/work1.jpg',
      'assets/teachers/soheil/work2.jpg',
      'assets/teachers/soheil/work3.mp4' // میتواند ویدیو هم باشد
    ],
    students: [
      'assets/teachers/soheil/student1.mp4',
      'assets/teachers/soheil/student2.jpg'
    ]
  },
  {
    id: 'enaayati',
    name: 'استاد عنایتی',
    role: 'مربی آواز',
    bio: 'متنی درباره استاد عنایتی — مدرس تکنیک‌های خوانندگی و تمرینات سلفژ.',
    avatar: 'assets/teachers/enaayati/avatar.jpg',
    works: [
      'assets/teachers/enaayati/work1.jpg',
      'assets/teachers/enaayati/work2.mp4'
    ],
    students: [
      'assets/teachers/enaayati/student1.mp4',
      'assets/teachers/enaayati/student2.jpg'
    ]
  }
];

/* PDF های سلفژ */
const SolfgePdfs = [
  { title: 'رویکرد ۱ — شنیداری', path: 'assets/pdfs/solfege1.pdf' },
  { title: 'رویکرد ۲ — ریتمیک', path: 'assets/pdfs/solfege2.pdf' },
  { title: 'رویکرد ۳ — تئوریک', path: 'assets/pdfs/solfege3.pdf' }
];

/* گالری نمونه صفحه اصلی (میتونی همین فایل‌ها را جایگزین کنی) */
const homeSamples = [
  'assets/samples/sample1.jpg',
  'assets/samples/sample2.jpg',
  'assets/samples/sample3.jpg',
  'assets/samples/sample4.jpg'
];

/* ---------- رفتار SPA ساده ---------- */
const navButtons = document.querySelectorAll('.nav button');
navButtons.forEach(btn => btn.addEventListener('click', ()=> {
  openSection(btn.dataset.target);
}));

function openSection(id){
  // Nav active
  document.querySelectorAll('.nav button').forEach(b=> b.classList.toggle('active', b.dataset.target===id));
  // Hide all pages, show selected
  document.querySelectorAll('main .page').forEach(p=> p.style.display = p.id===id ? '' : 'none');
  // scroll top
  window.scrollTo({top:0, behavior:'smooth'});
  // update hash
  history.replaceState(null, '', '#'+id);
}

/* ---------- نمایش استادها ---------- */
const teachersList = document.getElementById('teachersList');
const teachersGallery = document.getElementById('teachersGallery');
const studentsGrid = document.getElementById('studentsGrid');

function initTeachers(){
  teachersList.innerHTML = '';
  teachersGallery.innerHTML = '';
  studentsGrid.innerHTML = '';

  teachers.forEach(t=>{
    // card
    const card = document.createElement('div');
    card.className = 'teacher';
    card.innerHTML = `
      <img src="${t.avatar}" alt="${t.name}">
      <h4>${t.name}</h4>
      <p>${t.role}</p>
      <button onclick="openTeacher('${t.id}')">مشاهده گالری</button>
    `;
    teachersList.appendChild(card);

    // add works to teachersGallery (first two)
    (t.works || []).slice(0,2).forEach(w=>{
      const el = mediaEl(w);
      teachersGallery.appendChild(el);
    });

    // students gallery
    (t.students || []).forEach(s=>{
      const el = mediaEl(s);
      studentsGrid.appendChild(el);
    });
  });
}

/* تبدیل مسیر به المان img یا video */
function mediaEl(path){
  const lower = path.toLowerCase();
  if(lower.endsWith('.mp4') || lower.endsWith('.webm') || lower.endsWith('.ogg')){
    const v = document.createElement('video');
    v.src = path; v.controls = true; v.setAttribute('playsinline','');
    v.style.borderRadius = '10px';
    return v;
  } else {
    const i = document.createElement('img');
    i.src = path; i.alt = '';
    i.style.borderRadius = '10px';
    return i;
  }
}

/* ---------- باز کردن جزییات استاد ---------- */
const overlay = document.getElementById('overlay');
function openTeacher(id){
  const t = teachers.find(x=> x.id===id);
  if(!t) return;
  document.getElementById('teacherName').innerText = t.name + ' — ' + t.role;
  document.getElementById('teacherBio').innerText = t.bio;
  const works = document.getElementById('teacherWorks'); works.innerHTML = '';
  (t.works || []).forEach(w=> works.appendChild(mediaEl(w)));
  const studs = document.getElementById('teacherStudents'); studs.innerHTML = '';
  (t.students || []).forEach(s=> studs.appendChild(mediaEl(s)));

  overlay.style.display = 'flex';
  document.body.style.overflow = 'hidden'; // prevent background scroll
}
function closeOverlay(){
  overlay.style.display = 'none';
  document.body.style.overflow = '';
}

/* ---------- PDF list ---------- */
const pdfList = document.getElementById('pdfList');
function initPdfs(){
  pdfList.innerHTML = '';
  SolfgePdfs.forEach(p=>{
    const div = document.createElement('div'); div.className = 'pdf-item';
    div.innerHTML = `
      <div>
        <div style="font-weight:600;color:var(--accent)">${p.title}</div>
        <div class="text-muted" style="font-size:13px">${p.path}</div>
      </div>
      <div style="display:flex;gap:8px">
        <a href="${p.path}" target="_blank">مشاهده پی‌دی‌اف</a>
        <button class="ghost" onclick="downloadPdf('${p.path}')">دانلود</button>
      </div>
    `;
    pdfList.appendChild(div);
  });
}
function downloadPdf(path){
  const a = document.createElement('a'); a.href = path; a.download = path.split('/').pop(); document.body.appendChild(a); a.click(); a.remove();
}

/* ---------- پرکردن گالری خانه ---------- */
function initHomeGallery(){
  const g = document.getElementById('homeGallery');
  g.innerHTML = '';
  homeSamples.forEach(p=>{
    const img = document.createElement('img'); img.src = p; img.alt = '';
    g.appendChild(img);
  });
}

/* ---------- افکت صوتی هنگام اسکرول ---------- 
   توضیح: مرورگرها اجازه autoplay ندارند؛ کاربر باید ابتدا با صفحه تعامل کند.
   ما یک دکمه "فعال‌سازی صدا" قرار دادیم. پس از لمس آن، اسکرول صدا خواهد داد.
*/
let audioCtx, audioBuffer, soundEnabled=false;
const enableBtn = document.getElementById('enableSoundBtn');
enableBtn.addEventListener('click', async ()=>{
  try{
    // ساده‌ترین راه: بارگذاری فایل کوتاه mp3 و پخش آن با WebAudio
    // فایل صوتی نمونه: assets/guitar-note.mp3
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const resp = await fetch('assets/guitar-note.mp3');
    const arr = await resp.arrayBuffer();
    audioBuffer = await audioCtx.decodeAudioData(arr);
    soundEnabled = true;
    enableBtn.innerText = 'صدا فعال شد';
    enableBtn.classList.add('active');
  }catch(e){
    console.error(e);
    enableBtn.innerText = 'بارگذاری صدا ناموفق';
  }
});

let lastScroll = window.scrollY;
let lastPlay = 0;
window.addEventListener('scroll', ()=> {
  if(!soundEnabled || !audioBuffer) return;
  // فقط وقتی کاربر به سمت پایین اسکرول می‌کند و هر 350ms یک بار صدا
  const cur = window.scrollY;
  const now = Date.now();
  if(cur > lastScroll + 10 && now - lastPlay > 350){
    playNote();
    lastPlay = now;
  }
  lastScroll = cur;
});

function playNote(){
  if(!audioCtx || !audioBuffer) return;
  const src = audioCtx.createBufferSource();
  src.buffer = audioBuffer;
  const gain = audioCtx.createGain();
  gain.gain.value = 0.16 + Math.random()*0.08; // کمی تغییر ولوم
  src.connect(gain).connect(audioCtx.destination);
  src.playbackRate.value = 0.95 + Math.random()*0.12; // تغییر اندک در pitch
  src.start();
}

/* ---------- init ---------- */
function init(){
  // اگر هَش وجود داشت نمایش بده
  const h = location.hash ? location.hash.replace('#','') : 'home';
  openSection(h);
  initTeachers();
  initPdfs();
  initHomeGallery();
}
init();

/* ---------- نحوه اضافه/جایگزینی فایل‌ها (راهنما برای کاربر) ----------
  1) لوگو: assets/logo.png
  2) صوتی اسکرول: assets/guitar-note.mp3 (یک نت کوتاه گیتار)
  3) استادان:
     - پوشه پیشنهادی: assets/teachers/<teacher-id>/
     - در آرایه teachers در ابتدای اسکریپت، مسیر avatar/works/students را به فایل‌های واقعی تغییر بده
  4) PDFs: مسیرها را در SolfgePdfs قرار بده (assets/pdfs/...)
  5) نمونه‌های صفحه اصلی: assets/samples/
  6) اگر می‌خواهی عکس/ویدیو از طریق پنل وب آپلود کنی: می‌توانم کد آپلود سمت‌سرور یا آپلود محلی (File API) اضافه کنم — بگو اگر نیاز داری.
*/

</script>
</body>
</html>
