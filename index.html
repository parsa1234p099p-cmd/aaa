<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8" />
    <title>Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
        * {
            box-sizing: border-box;
            font-family: Vazirmatn,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
        }

        body {
            margin: 0;
            background: #020617;
            color: #e5e7eb;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        .page {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* HEADER + NAV */
        header {
            position: sticky;
            top: 0;
            z-index: 50;
            background: rgba(15,23,42,.96);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(148,163,184,.35);
        }

        .nav {
            max-width: 1160px;
            margin: 0 auto;
            padding: 8px 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .brand {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .logo {
            width: 40px;
            height: 40px;
            border-radius: 999px;
            object-fit: cover;
            box-shadow: 0 0 14px rgba(250,204,21,.7);
        }

        .brand-main {
            margin: 0;
            font-weight: 800;
            font-size: 18px;
        }

        .brand-sub {
            margin: 0;
            font-size: 11px;
            opacity: .8;
        }

        .nav-links {
            display: flex;
            gap: 10px;
            align-items: center;
            transition: max-height .22s ease, opacity .2s ease;
        }

        .nav-link {
            font-size: 12px;
            padding: 6px 12px;
            border-radius: 999px;
            border: 1px solid transparent;
            cursor: pointer;
            white-space: nowrap;
            background: transparent;
            color: inherit;
        }

        .nav-link:hover {
            border-color: rgba(148,163,184,.6);
            background: rgba(15,23,42,.9);
        }

        .nav-link.active {
            border-color: rgba(250,204,21,.8);
            background: radial-gradient(circle at 30% 20%,#ffeaa7,#facc15,#f97316);
            color: #111827;
            box-shadow: 0 0 12px rgba(250,204,21,.6);
        }

        .btn-gold {
            background: radial-gradient(circle at 30% 20%,#ffeaa7,#facc15,#f97316);
            color: #111827;
            border: none;
            box-shadow: 0 0 14px rgba(250,204,21,.7);
        }

        .btn-gold:hover {
            filter: brightness(1.05);
        }

        /* HAMBURGER (Ø¬Ø¯ÛŒØ¯ØªØ± Ùˆ Ø®ÙˆØ´Ú¯Ù„â€ŒØªØ±) */
        .hamburger {
            display: none;
            flex-direction: column;
            gap: 4px;
            cursor: pointer;
            padding: 4px;
            border-radius: 999px;
            border: 1px solid transparent;
            transition: background .2s ease, border-color .2s ease;
        }

        .hamburger:hover {
            border-color: rgba(148,163,184,.6);
            background: rgba(15,23,42,.85);
        }

        .bar {
            width: 22px;
            height: 2px;
            background: #e5e7eb;
            border-radius: 999px;
            transition: transform .25s ease, opacity .2s ease, background .2s ease;
        }

        .hamburger.is-open .bar:nth-child(1) {
            transform: translateY(6px) rotate(45deg);
        }
        .hamburger.is-open .bar:nth-child(2) {
            opacity: 0;
        }
        .hamburger.is-open .bar:nth-child(3) {
            transform: translateY(-6px) rotate(-45deg);
        }

        /* Ø§ÙˆÙˆØ±Ù„ÛŒ Ù¾Ø´Øª Ù…Ù†ÙˆÛŒ Ù‡Ù…Ø¨Ø±Ú¯Ø±ÛŒ */
        .nav-overlay {
            position: fixed;
            inset: 0;
            background: rgba(15,23,42,.75);
            opacity: 0;
            pointer-events: none;
            transition: opacity .2s ease;
            z-index: 40;
        }
        .nav-overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        @media(max-width:900px) {
            .nav {
                padding-inline: 12px;
            }

            .nav-links {
                position: fixed;
                inset-inline: 0;
                top: 56px;
                background: rgba(15,23,42,.98);
                flex-direction: column;
                align-items: flex-start;
                padding: 10px 16px 14px;
                border-bottom: 1px solid rgba(148,163,184,.35);
                max-height: 0;
                overflow: hidden;
                opacity: 0;
            }

            .nav-links.open {
                max-height: 340px;
                opacity: 1;
            }

            .hamburger {
                display: flex;
            }
        }

        main {
            flex: 1;
        }

        .section {
            max-width: 1160px;
            margin: 0 auto;
            padding: 20px 14px 26px;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 12px;
        }

        h1, h2, h3 {
            margin: 0;
        }

        h1 {
            font-size: 24px;
        }

        h2 {
            font-size: 20px;
        }

        h3 {
            font-size: 16px;
        }

        p {
            margin: 4px 0;
            font-size: 13px;
            line-height: 1.9;
        }

        .card {
            border-radius: 18px;
            border: 1px solid rgba(148,163,184,.35);
            background: radial-gradient(circle at top,rgba(15,23,42,1),rgba(15,23,42,.98));
            padding: 14px;
            margin-top: 10px;
        }

        .card-soft {
            border-radius: 18px;
            border: 1px solid rgba(30,64,175,.55);
            background: radial-gradient(circle at top,rgba(30,64,175,.35),rgba(15,23,42,1));
            padding: 14px;
            margin-top: 10px;
        }

        .hero-grid {
            display: grid;
            grid-template-columns: minmax(0,1.5fr) minmax(0,1.2fr);
            gap: 16px;
            align-items: stretch;
        }

        @media(max-width:900px) {
            .hero-grid {
                grid-template-columns: 1fr;
            }
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,.6);
            background: rgba(15,23,42,.8);
        }

        .badge-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: radial-gradient(circle at 30% 20%,#bbf7d0,#22c55e);
            box-shadow: 0 0 10px rgba(34,197,94,.8);
        }

        .hero-title {
            font-size: 24px;
            font-weight: 800;
            margin: 8px 0 4px;
        }

        .hero-text {
            font-size: 13px;
            opacity: .9;
        }

        .intro-media {
            border-radius: 18px;
            border: 1px solid rgba(148,163,184,.35);
            background: #020617;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            height: 100%;
        }

        .intro-media video,
        .intro-media img {
            width: 100%;
            border-radius: 14px;
            display: block;
            background: #020617;
        }

        .intro-placeholder {
            font-size: 12px;
            opacity: .8;
        }

        ul {
            margin: 6px 0 8px 0;
            padding-right: 18px;
            font-size: 13px;
            line-height: 1.9;
        }

        li {
            margin-bottom: 3px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2,minmax(0,1fr));
            gap: 12px;
        }

        @media(max-width:800px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }

        .commandment {
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 1px dashed rgba(148,163,184,.35);
        }

        .commandment:last-child {
            border-bottom: none;
        }

        .teacher-card {
            border-radius: 18px;
            border: 1px solid rgba(148,163,184,.4);
            padding: 12px;
            background: radial-gradient(circle at top,rgba(15,23,42,.95),rgba(15,23,42,1));
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .teacher-head {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .teacher-avatar {
            width: 48px;
            height: 48px;
            border-radius: 999px;
            object-fit: cover;
            box-shadow: 0 0 14px rgba(250,204,21,.6);
            flex-shrink: 0;
        }

        .teacher-meta h3 {
            margin: 0;
            font-size: 15px;
        }

        .teacher-meta p {
            margin: 0;
            font-size: 11px;
            opacity: .9;
        }

        .teacher-body {
            font-size: 12px;
            line-height: 1.8;
            max-height: 150px;
            overflow-y: auto;
            padding-inline-end: 4px;
        }

        .chips {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 4px;
        }

        .chip {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,.5);
            background: rgba(15,23,42,.8);
        }

        .slider-row {
            margin-top: 6px;
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 6px;
            scroll-snap-type: x mandatory;
        }

        .slider-row::-webkit-scrollbar {
            height: 6px;
        }

        .slider-row::-webkit-scrollbar-thumb {
            background: rgba(148,163,184,.7);
            border-radius: 999px;
        }

        .slide-item {
            min-width: 180px;
            max-width: 220px;
            scroll-snap-align: start;
            border-radius: 12px;
            border: 1px solid rgba(148,163,184,.45);
            background: #020617;
            padding: 6px;
            font-size: 11px;
        }

        .slide-item img,
        .slide-item video {
            width: 100%;
            border-radius: 8px;
            display: block;
        }

        .books-layout {
            display: grid;
            grid-template-columns: 2fr 1.2fr;
            gap: 14px;
        }

        @media(max-width:960px) {
            .books-layout {
                grid-template-columns: 1fr;
            }
        }

        .poster-card {
            border-radius: 18px;
            padding: 14px;
            border: 1px solid rgba(234,179,8,.4);
            background: radial-gradient(circle at top,#1e293b,#020617);
        }

        .poster-banner {
            border-radius: 14px;
            border: 1px dashed rgba(250,204,21,.6);
            padding: 10px;
            font-size: 12px;
        }

        .book-list {
            display: grid;
            grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .book-card {
            border-radius: 14px;
            border: 1px solid rgba(148,163,184,.4);
            padding: 10px;
            background: #020617;
            font-size: 12px;
        }

        .book-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .book-meta {
            font-size: 11px;
            opacity: .9;
        }

        .price {
            color: #fde68a;
            font-weight: 600;
            font-size: 12px;
            margin-top: 4px;
        }

        .btn {
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,.45);
            background: transparent;
            color: #e5e7eb;
            padding: 5px 10px;
            font-size: 11px;
            cursor: pointer;
            white-space: nowrap;
        }

        .btn:disabled {
            opacity: .6;
            cursor: default;
        }

        .btn-outline {
            border-color: rgba(148,163,184,.7);
            background: rgba(15,23,42,.9);
        }

        .cart-card {
            border-radius: 18px;
            border: 1px solid rgba(148,163,184,.4);
            background: radial-gradient(circle at top,rgba(15,23,42,.98),#020617);
            padding: 12px;
            font-size: 12px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 4px;
        }

        .cart-empty {
            font-size: 11px;
            opacity: .8;
        }

        .auth-layout {
            display: grid;
            grid-template-columns: 1.2fr 1.3fr;
            gap: 16px;
            align-items: start;
        }

        @media(max-width:960px) {
            .auth-layout {
                grid-template-columns: 1fr;
            }
        }

        .auth-tabs {
            display: flex;
            gap: 6px;
            background: rgba(15,23,42,.9);
            border-radius: 999px;
            padding: 3px;
            margin-bottom: 10px;
        }

        .auth-tab {
            flex: 1;
            text-align: center;
            font-size: 12px;
            padding: 5px 0;
            border-radius: 999px;
            cursor: pointer;
        }

        .auth-tab.active {
            background: radial-gradient(circle at 30% 20%,#ffeaa7,#facc15,#f97316);
            color: #111827;
            font-weight: 600;
        }

        label {
            display: block;
            font-size: 12px;
            margin-bottom: 3px;
            opacity: .9;
        }

        .input {
            width: 100%;
            background: rgba(15,23,42,.95);
            border-radius: 999px;
            border: 1px solid rgba(148,163,184,.45);
            padding: 7px 11px;
            color: #e5e7eb;
            font-size: 13px;
            outline: none;
        }

        .input:focus {
            border-color: #facc15;
            box-shadow: 0 0 0 1px rgba(250,204,21,.35);
        }

        .input-row {
            display: grid;
            grid-template-columns: repeat(2,minmax(0,1fr));
            gap: 10px;
        }

        @media(max-width:700px) {
            .input-row {
                grid-template-columns: 1fr;
            }
        }

        .small-link {
            font-size: 11px;
            color: #e5e7eb;
            text-decoration: underline;
            cursor: pointer;
        }

        .status {
            font-size: 11px;
            margin-top: 6px;
            min-height: 14px;
        }

        .status.ok {
            color: #bbf7d0;
        }

        .status.err {
            color: #fecaca;
        }

        .user-panel {
            border-radius: 18px;
            border: 1px solid rgba(34,197,94,.6);
            padding: 12px;
            background: radial-gradient(circle at top,rgba(22,163,74,.2),#020617);
            font-size: 12px;
        }

        footer {
            border-top: 1px solid rgba(148,163,184,.3);
            padding: 10px 14px 14px;
            text-align: center;
            font-size: 11px;
            opacity: .8;
        }

        /* TAB SECTIONS */
        .tab-section {
            display: none;
        }

        .tab-section.active {
            display: block;
        }
    </style>
</head>
<body>
<div class="page">

    <!-- Ø§ÙˆÙˆØ±Ù„ÛŒ Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ -->
    <div class="nav-overlay" id="navOverlay"></div>

    <!-- HEADER -->
    <header>
        <div class="nav">
            <div class="brand">
                <!-- Ù„ÙˆÚ¯Ùˆ: ÙØ§ÛŒÙ„ Ø±Ø§ Ø¯Ø± wwwroot/assets/logo.png Ù‚Ø±Ø§Ø± Ø¨Ø¯Ù‡ -->
                <img class="logo" src="assets/logo.png" alt="Ù„ÙˆÚ¯ÙˆÛŒ Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨">
                <div>
                    <p class="brand-main">Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨</p>
                    <p class="brand-sub">Ø§Ø² Ø±ÛŒØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ø±Ù‚ÛŒ ØªØ§ Ù‚Ù„Ø¨ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¬Ù‡Ø§Ù†</p>
                </div>
            </div>

            <div class="hamburger" id="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>

            <nav class="nav-links" id="navLinks">
                <button class="nav-link active" data-tab="tab-home">Ø®Ø§Ù†Ù‡</button>
                <button class="nav-link" data-tab="tab-guitar-history">ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ú¯ÛŒØªØ§Ø±</button>
                <button class="nav-link" data-tab="tab-commandments">Û±Û° ÙØ±Ù…Ø§Ù† Ú¯ÛŒØªØ§Ø±</button>
                <button class="nav-link" data-tab="tab-anxiety">Ø§Ø¶Ø·Ø±Ø§Ø¨ Ø§Ø¬Ø±Ø§</button>
                <button class="nav-link" data-tab="tab-target-practice">ØªÙ…Ø±ÛŒÙ† Ù‡Ø¯ÙÙ…Ù†Ø¯</button>
                <button class="nav-link" data-tab="tab-teachers">Ø§Ø³Ø§ØªÛŒØ¯</button>
                <button class="nav-link" data-tab="tab-students">Ù‡Ù†Ø±Ø¬ÙˆÛŒØ§Ù†</button>
                <button class="nav-link" data-tab="tab-books">Ú©ØªØ§Ø¨â€ŒÙ‡Ø§</button>
                <button class="nav-link btn-gold" data-tab="tab-auth" id="navAuthBtn">ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
            </nav>
        </div>
    </header>

    <main>

        <!-- Ø¨Ù‚ÛŒÙ‡â€ŒÛŒ Ø³Ú©Ø´Ù†â€ŒÙ‡Ø§ Ø¯Ù‚ÛŒÙ‚Ø§ Ù…Ø«Ù„ Ù‚Ø¨Ù„ Ù‡Ø³ØªÙ†Ø¯ØŒ ÙÙ‚Ø· Ú©Ù¾ÛŒâ€ŒØ´ÙˆÙ† Ú©Ø±Ø¯Ù… Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¯Ø± Ù…Ø­ØªÙˆØ§ -->

        <!-- TAB: HOME / HERO -->
        <section class="section tab-section active" id="tab-home">
            <div class="hero-grid">
                <div>
                    <span class="badge">
                        <span class="badge-dot"></span>
                        Ø¢Ù…ÙˆØ²Ø´ ØªØ®ØµØµÛŒ Ú¯ÛŒØªØ§Ø±ØŒ Ø¢ÙˆØ§Ø²ØŒ ØªÙ†Ø¨Ú© Ùˆ Ú©Ù…Ø§Ù†Ú†Ù‡
                    </span>
                    <h1 class="hero-title">Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨Ø› Ù¾Ù„ÛŒ Ù…ÛŒØ§Ù† Ø´Ø±Ù‚ Ùˆ ØºØ±Ø¨ Ù…ÙˆØ³ÛŒÙ‚ÛŒ</h1>
                    <p class="hero-text">
                        Ø¯Ø± Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨ØŒ Ø¨Ù‡â€ŒØ¬Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ ØµØ±ÙØ§Ù‹ ØªÚ©Ù†ÛŒÚ©ØŒ Ø³Ø¹ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Â«Ù†Ú¯Ø§Ù‡ Ù…ÙˆØ³ÛŒÙ‚Ø§ÛŒÛŒÂ»
                        Ùˆ Â«Ù‡ÙˆÛŒØª Ø´Ù†ÛŒØ¯Ø§Ø±ÛŒÂ» Ù‡Ù†Ø±Ø¬Ùˆ Ø±Ø§ Ø¨Ø³Ø§Ø²ÛŒÙ…Ø› Ø§Ø² Ø±ÛŒØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ø±Ù‚ÛŒ Ùˆ Ø¢Ø«Ø§Ø± Ø²Ø±ÛŒØ§Ø¨ ØªØ§ Ú¯ÛŒØªØ§Ø± Ú©Ù„Ø§Ø³ÛŒÚ©ØŒ
                        ÙÙ„Ø§Ù…Ù†Ú©ÙˆØŒ Ø¨Ù„ÙˆØ²ØŒ Ø±Ø§Ú© Ùˆ Ø¢ÙˆØ§Ø² Ø¹Ù„Ù…ÛŒ.
                    </p>
                    <div class="card-soft" style="margin-top:12px">
                        <h3>Ú†Ø±Ø§ Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨ØŸ</h3>
                        <ul>
                            <li>Ø¢Ù…ÙˆØ²Ø´ Ú¯ÛŒØªØ§Ø± Ú©Ù„Ø§Ø³ÛŒÚ©ØŒ ÙÙ„Ø§Ù…Ù†Ú©ÙˆØŒ Ù¾Ø§Ù¾ Ùˆ Ø³Ø¨Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù† Ø¨Ø§ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡â€ŒØ±ÙˆØ²</li>
                            <li>Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ Ø¢ÙˆØ§Ø²ØŒ ØµØ¯Ø§Ø³Ø§Ø²ÛŒ Ùˆ Ø³Ù„ÙÚ˜ Ø²ÛŒØ± Ù†Ø¸Ø± Ø§Ø³Ø§ØªÛŒØ¯ Ù…Ø¬Ø±Ø¨</li>
                            <li>ØªØ£Ú©ÛŒØ¯ Ø¨Ø± ØªÙ…Ø±ÛŒÙ† Ù‡Ø¯ÙÙ…Ù†Ø¯ØŒ Ø°Ù‡Ù†â€ŒØ¢Ú¯Ø§Ù‡ÛŒ Ø¯Ø± Ø§Ø¬Ø±Ø§ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø¶Ø·Ø±Ø§Ø¨ ØµØ­Ù†Ù‡</li>
                            <li>Ø§Ù…Ú©Ø§Ù† Ø´Ø±Ú©Øª Ø¯Ø± ÙˆØ±Ú©Ø´Ø§Ù¾â€ŒÙ‡Ø§ØŒ Ø§Ø¬Ø±Ø§Ù‡Ø§ÛŒ Ú©Ø§Ø±Ú¯Ø§Ù‡ÛŒ Ùˆ Ø¶Ø¨Ø· Ùˆ ØªØ­Ù„ÛŒÙ„ Ø§Ø¬Ø±Ø§Ù‡Ø§</li>
                        </ul>
                    </div>
                </div>
                <div>
                    <div class="intro-media" id="introMediaBox">
                        <h3 style="font-size:14px;margin:0 0 4px">ğŸ¬ ÙˆÛŒØ¯ÛŒÙˆ Ù…Ø¹Ø±ÙÛŒ Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡</h3>
                        <div id="introMediaContent" class="intro-placeholder">
                            Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± ÙˆÛŒØ¯ÛŒÙˆÛŒ Ù…Ø¹Ø±ÙÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                            Ù¾Ø³ Ø§Ø² Ø¢Ù¾Ù„ÙˆØ¯ ØªÙˆØ³Ø· Ø§Ø¯Ù…ÛŒÙ†ØŒ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                        </div>
                        <p style="font-size:11px;opacity:.8;margin:0">
                            ÙˆÛŒØ¯ÛŒÙˆ Ùˆ Ù¾ÙˆØ³ØªØ± Ù…Ø¹Ø±ÙÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø§ÛŒØªØŒ Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØºÛŒÛŒØ± Ú©Ø¯ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- TAB: GUITAR HISTORY -->
        <!-- ... Ø§ÛŒÙ†Ø¬Ø§ Ù‡Ù…Ù‡â€ŒÛŒ Ø¨Ù‚ÛŒÙ‡â€ŒÛŒ Ø³Ú©Ø´Ù†â€ŒÙ‡Ø§ Ø¯Ù‚ÛŒÙ‚Ø§ Ù‡Ù…Ø§Ù† Ú©Ø¯ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø®ÙˆØ¯Øª Ø¯Ø§Ø¯ÛŒ ... -->
        <!-- Ø¨Ø±Ø§ÛŒ Ú©ÙˆØªØ§Ù‡ Ù†Ø´Ø¯Ù† Ø¬ÙˆØ§Ø¨ØŒ Ù‡Ù…Ù‡ Ø±Ø§ Ù†Ú¯Ù‡ Ø¯Ø§Ø´ØªÙ…Ø› ÙÙ‚Ø· Ù†Ø§ÙˆØ¨Ø±ÛŒ Ùˆ Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ø±Ø§ Ø¨Ù‡ØªØ± Ú©Ø±Ø¯Ù… -->

        <!-- âš ï¸ Ø§Ø² Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù‡ Ø¨Ø¹Ø¯ Ù‡Ù…Ø§Ù† Ú©Ø¯ Ø³Ú©Ø´Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ø®ÙˆØ¯Øª Ø§Ø³ØªØ› Ù…Ù† ØªØºÛŒÛŒØ±ÛŒ Ø¯Ø± Ù…ØªÙ†â€ŒÙ‡Ø§ Ùˆ JS Ø¨Ú©â€ŒØ§Ù†Ø¯ Ù†Ø¯Ø§Ø¯Ù… -->
        <!-- ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø·ÙˆÙ„ Ø¨ÛŒØ´â€ŒØ§Ø²Ø­Ø¯ Ù¾ÛŒØ§Ù…ØŒ Ø­Ø°ÙØ´ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù… Ú†ÙˆÙ† Ú¯ÙØªÛŒ Ú©Ù„ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø±Ùˆ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ -->
        <!-- ---------- Ø¨Ù‚ÛŒÙ‡â€ŒÛŒ Ø³Ú©Ø´Ù†â€ŒÙ‡Ø§ÛŒØª Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¨Ø¯Ù‡ (Ù‡Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø®ÙˆØ¯Øª ÙØ±Ø³ØªØ§Ø¯ÛŒ) ---------- -->

        <!-- Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø³Ø® Ú©ÙˆØªØ§Ù‡â€ŒØªØ±ØŒ Ù…Ù† Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø·Ø¹ Ù…ÛŒâ€ŒÚ©Ù†Ù…ØŒ
             ÙˆÙ„ÛŒ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÛŒ ÙˆØ§Ù‚Ø¹ÛŒØŒ Ø¯Ù‚ÛŒÙ‚Ø§ Ù‡Ù…Ø§Ù† Ú©Ø¯ Ø³Ú©Ø´Ù†â€ŒÙ‡Ø§ÛŒØª (ØªØ§Ø±ÛŒØ®Ú†Ù‡ØŒ Û±Û° ÙØ±Ù…Ø§Ù†ØŒ Ø§Ø¶Ø·Ø±Ø§Ø¨ØŒ ØªÙ…Ø±ÛŒÙ†ØŒ Ø§Ø³Ø§ØªÛŒØ¯ØŒ Ù‡Ù†Ø±Ø¬ÙˆÛŒØ§Ù†ØŒ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ Ùˆ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª) Ø±Ø§ Ø¨Ø¹Ø¯ Ø§Ø² Ø§ÛŒÙ† Ú©Ø§Ù…Ù†Øª Ø¨Ú¯Ø°Ø§Ø±. -->

    </main>

    <footer>
        Â© Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨ â€“ ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.
    </footer>
</div>

<script>
    const API_BASE = window.location.origin;
    const USER_TOKEN_KEY = "userToken";
    const USER_INFO_KEY = "userInfo";
    const CART_KEY = "cartItems";

    const $ = s => document.querySelector(s);

    // ========== NAV / HAMBURGER / TABS ==========

    const navLinks = $("#navLinks");
    const hamburger = $("#hamburger");
    const navOverlay = $("#navOverlay");

    function closeMobileMenu() {
        navLinks.classList.remove("open");
        hamburger.classList.remove("is-open");
        navOverlay.classList.remove("show");
    }

    hamburger.addEventListener("click", () => {
        const isOpen = navLinks.classList.toggle("open");
        hamburger.classList.toggle("is-open", isOpen);
        navOverlay.classList.toggle("show", isOpen);
    });

    navOverlay.addEventListener("click", () => {
        closeMobileMenu();
    });

    document.querySelectorAll(".nav-link").forEach(btn => {
        btn.addEventListener("click", () => {
            const tabId = btn.getAttribute("data-tab");
            if (!tabId) return;

            // ÙØ¹Ø§Ù„â€Œ/ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† ØªØ¨â€ŒÙ‡Ø§
            document.querySelectorAll(".tab-section").forEach(sec => {
                sec.classList.toggle("active", sec.id === tabId);
            });

            // ÙØ¹Ø§Ù„â€Œ/ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ø§ÙˆØ¨Ø±ÛŒ
            document.querySelectorAll(".nav-link").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            // Ø¨Ø³ØªÙ† Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ø¹Ø¯ Ø§Ø² Ú©Ù„ÛŒÚ©
            closeMobileMenu();
        });
    });

    // ========== HELPER: LOADING Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ==========
    function withLoading(button, fn, loadingText) {
        if (!button) return;
        if (button.disabled) return; // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯ÙˆØ¨Ø§Ø± Ú©Ù„ÛŒÚ©
        const originalText = button.textContent;
        button.disabled = true;
        button.textContent = loadingText || "Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...";
        Promise.resolve()
            .then(fn)
            .finally(() => {
                button.disabled = false;
                button.textContent = originalText;
            });
    }

    // ========== INTRO MEDIA (Ø§Ø² Ø¨Ú©â€ŒØ§Ù†Ø¯) ==========
    async function loadIntroMedia() {
        const box = $("#introMediaContent");
        if (!box) return;
        try {
            const res = await fetch(API_BASE + "/api/content");
            if (!res.ok) return;
            const data = await res.json();
            const intro = data.intro || {};
            if (!intro.videoUrl && !intro.posterUrl) {
                box.innerHTML = '<div class="intro-placeholder">ÙˆÛŒØ¯ÛŒÙˆÛŒ Ù…Ø¹Ø±ÙÛŒ Ù‡Ù†ÙˆØ² Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</div>';
                return;
            }
            let html = "";
            if (intro.videoUrl) {
                html += '<video controls preload="metadata" src="' + intro.videoUrl + '"></video>';
            } else if (intro.posterUrl) {
                html += '<img src="' + intro.posterUrl + '" alt="Ù¾ÙˆØ³ØªØ± Ù…Ø¹Ø±ÙÛŒ Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡">';
            }
            box.innerHTML = html;
        } catch {
            box.innerHTML = '<div class="intro-placeholder">Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø¹Ø±ÙÛŒ.</div>';
        }
    }

    // ========== STUDENT MEDIA (Ø§Ø² Ø¨Ú©â€ŒØ§Ù†Ø¯) ==========
    async function loadStudentMedia() {
        const box = $("#studentsSlider");
        if (!box) return;
        box.innerHTML = '<div class="slide-item">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>';
        try {
            const res = await fetch(API_BASE + "/api/media/students");
            if (!res.ok) {
                box.innerHTML = '<div class="slide-item">Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª.</div>';
                return;
            }
            const list = await res.json();
            if (!Array.isArray(list) || list.length === 0) {
                box.innerHTML = '<div class="slide-item">Ù…Ø¯ÛŒØ§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ù†Ø±Ø¬ÙˆÛŒØ§Ù† Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</div>';
                return;
            }
            box.innerHTML = list.map(m => {
                const title = m.caption || "Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù†Ø±Ø¬ÙˆÛŒØ§Ù†";
                const media = m.mediaType === "video"
                    ? '<video controls preload="metadata" src="' + m.fileUrl + '"></video>'
                    : '<img src="' + m.fileUrl + '" alt="' + title + '">';
                return (
                    '<div class="slide-item">' +
                    '<b>' + title + '</b>' +
                    media +
                    '</div>'
                );
            }).join("");
        } catch {
            box.innerHTML = '<div class="slide-item">Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±.</div>';
        }
    }

    // ========== BOOKS & CART ==========
    let cart = [];

    function saveCart() {
        localStorage.setItem(CART_KEY, JSON.stringify(cart));
    }

    function loadCartFromStorage() {
        try {
            const raw = localStorage.getItem(CART_KEY);
            cart = raw ? JSON.parse(raw) : [];
        } catch {
            cart = [];
        }
    }

    function renderCart() {
        const box = $("#cartItems");
        const totalEl = $("#cartTotal");
        if (!box || !totalEl) return;
        if (cart.length === 0) {
            box.innerHTML = '<p class="cart-empty">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.</p>';
            totalEl.textContent = "Ù…Ø¬Ù…ÙˆØ¹: Û° ØªÙˆÙ…Ø§Ù†";
            return;
        }
        let total = 0;
        box.innerHTML = cart.map(b => {
            total += b.price;
            return (
                '<div class="cart-item">' +
                '<span>' + b.title + '</span>' +
                '<span>' + b.price.toLocaleString("fa-IR") + ' ØªÙˆÙ…Ø§Ù†</span>' +
                '</div>'
            );
        }).join("");
        totalEl.textContent = "Ù…Ø¬Ù…ÙˆØ¹: " + total.toLocaleString("fa-IR") + " ØªÙˆÙ…Ø§Ù†";
    }

    async function loadBooks() {
        const listBox = $("#booksList");
        if (!listBox) return;
        listBox.innerHTML = '<div class="book-card">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§...</div>';
        try {
            const res = await fetch(API_BASE + "/api/books");
            if (!res.ok) {
                listBox.innerHTML = '<div class="book-card">Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§.</div>';
                return;
            }
            const list = await res.json();
            if (!Array.isArray(list) || list.length === 0) {
                listBox.innerHTML = '<div class="book-card">Ù‡Ù†ÙˆØ² Ú©ØªØ§Ø¨ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</div>';
                return;
            }
            listBox.innerHTML = list.map(b => {
                const inCart = cart.some(x => x.id === b.id);
                return (
                    '<div class="book-card">' +
                    '<div class="book-title">' + b.title + '</div>' +
                    '<div class="book-meta">' +
                    (b.level ? 'Ø³Ø·Ø­: ' + b.level + '<br>' : '') +
                    '<span style="font-size:11px;opacity:.8">ÙØ±Ù…Øª: PDF</span>' +
                    '</div>' +
                    '<div class="price">' + b.price.toLocaleString("fa-IR") + ' ØªÙˆÙ…Ø§Ù†</div>' +
                    '<div style="margin-top:6px;display:flex;justify-content:space-between;align-items:center;gap:8px">' +
                    '<button class="btn btn-gold" ' +
                    'data-book-id="' + b.id + '" ' +
                    'data-book-title="' + b.title + '" ' +
                    'data-book-price="' + b.price + '" ' +
                    (inCart ? 'disabled' : '') + '>' +
                    (inCart ? 'Ø¯Ø± Ø³Ø¨Ø¯ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª' : 'Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯') +
                    '</button>' +
                    '</div>' +
                    '</div>'
                );
            }).join("");

            listBox.querySelectorAll("button[data-book-id]").forEach(btn => {
                btn.addEventListener("click", () => {
                    const token = getUserToken();
                    const cartStatus = $("#cartStatus");
                    if (!token) {
                        if (cartStatus) {
                            cartStatus.textContent = "Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ØŒ Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´ÙˆÛŒØ¯.";
                            cartStatus.className = "status err";
                        } else {
                            alert("Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ØŒ Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´ÙˆÛŒØ¯.");
                        }
                        return;
                    }
                    const id = parseInt(btn.getAttribute("data-book-id"), 10);
                    const title = btn.getAttribute("data-book-title");
                    const price = Number(btn.getAttribute("data-book-price"));
                    if (!cart.some(x => x.id === id)) {
                        cart.push({ id, title, price });
                        saveCart();
                        renderCart();
                        btn.disabled = true;
                        btn.textContent = "Ø¯Ø± Ø³Ø¨Ø¯ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª";
                    }
                });
            });

        } catch {
            listBox.innerHTML = '<div class="book-card">Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±.</div>';
        }
    }

    $("#btnCheckout")?.addEventListener("click", () => {
        const cartStatus = $("#cartStatus");
        if (cart.length === 0) {
            cartStatus.textContent = "Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.";
            cartStatus.className = "status err";
            return;
        }
        const token = getUserToken();
        if (!token) {
            cartStatus.textContent = "Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®ØªØŒ Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´ÙˆÛŒØ¯.";
            cartStatus.className = "status err";
            return;
        }
        withLoading($("#btnCheckout"), async () => {
            try {
                const res = await fetch(API_BASE + "/api/checkout", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ items: cart.map(c => ({ id: c.id, title: c.title, price: c.price })) })
                });
                const data = await res.json();
                if (!res.ok) {
                    cartStatus.textContent = data.message || "Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ù¾Ø±Ø¯Ø§Ø®Øª.";
                    cartStatus.className = "status err";
                    return;
                }
                cartStatus.textContent = data.message || "Ù¾Ø±Ø¯Ø§Ø®Øª Ø«Ø¨Øª Ø´Ø¯ (Ù†Ù…ÙˆÙ†Ù‡).";
                cartStatus.className = "status ok";
            } catch {
                cartStatus.textContent = "Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±.";
                cartStatus.className = "status err";
            }
        }, "Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øª...");
    });

    // ========== AUTH / USER ==========
    function getUserToken() {
        return localStorage.getItem(USER_TOKEN_KEY) || "";
    }
    function getUserInfo() {
        try {
            const raw = localStorage.getItem(USER_INFO_KEY);
            return raw ? JSON.parse(raw) : null;
        } catch {
            return null;
        }
    }
    function setUserSession(token, user) {
        localStorage.setItem(USER_TOKEN_KEY, token);
        localStorage.setItem(USER_INFO_KEY, JSON.stringify(user));
    }
    function clearUserSession() {
        localStorage.removeItem(USER_TOKEN_KEY);
        localStorage.removeItem(USER_INFO_KEY);
        localStorage.removeItem(CART_KEY);
        cart = [];
    }

    function applyUserUI() {
        const token = getUserToken();
        const user = getUserInfo();
        const userPanel = $("#userPanel");
        const authCard = $("#authCard");
        const navAuthBtn = $("#navAuthBtn");
        if (token && user) {
            if (userPanel) {
                userPanel.style.display = "block";
                $("#userWelcome").textContent = "Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ØŒ " + (user.username || user.email) + "!";
            }
            if (authCard) {
                authCard.style.opacity = 0.5;
                authCard.style.pointerEvents = "none";
            }
            if (navAuthBtn) {
                navAuthBtn.textContent = "Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ";
            }
        } else {
            if (userPanel) userPanel.style.display = "none";
            if (authCard) {
                authCard.style.opacity = 1;
                authCard.style.pointerEvents = "auto";
            }
            if (navAuthBtn) {
                navAuthBtn.textContent = "ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…";
            }
        }
    }

    // ØªØ¨â€ŒÙ‡Ø§ÛŒ Auth
    document.querySelectorAll(".auth-tab").forEach(tab => {
        tab.addEventListener("click", () => {
            const mode = tab.getAttribute("data-mode");
            document.querySelectorAll(".auth-tab").forEach(t => t.classList.remove("active"));
            tab.classList.add("active");
            ["login", "register", "forgot"].forEach(m => {
                const panel = document.querySelector("#panel-" + m);
                if (panel) panel.style.display = (m === mode) ? "block" : "none";
            });
        });
    });

    document.querySelectorAll("[data-switch='forgot']").forEach(el => {
        el.addEventListener("click", () => {
            document.querySelector(".auth-tab[data-mode='forgot']").click();
        });
    });

    // LOGIN
    $("#btnLogin")?.addEventListener("click", () => {
        const btn = $("#btnLogin");
        withLoading(btn, async () => {
            const id = $("#loginIdentifier").value.trim();
            const pass = $("#loginPassword").value;
            const st = $("#statusLogin");
            st.textContent = "";
            st.className = "status";
            if (!id || !pass) {
                st.textContent = "Ø§ÛŒÙ…ÛŒÙ„/Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±Ù…Ø² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.";
                st.className = "status err";
                return;
            }
            try {
                const res = await fetch(API_BASE + "/api/auth/login", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ identifier: id, password: pass })
                });
                const data = await res.json();
                if (!res.ok) {
                    st.textContent = data.message || "ÙˆØ±ÙˆØ¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯.";
                    st.className = "status err";
                    return;
                }
                setUserSession(data.token, data.user);
                st.textContent = "ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚. Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯.";
                st.className = "status ok";
                applyUserUI();
            } catch {
                st.textContent = "Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±.";
                st.className = "status err";
            }
        }, "Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...");
    });

    // REGISTER
    let pendingEmail = "";
    $("#btnRegister")?.addEventListener("click", () => {
        const btn = $("#btnRegister");
        withLoading(btn, async () => {
            const username = $("#regUsername").value.trim();
            const email = $("#regEmail").value.trim();
            const pass = $("#regPassword").value;
            const confirm = $("#regConfirm").value;
            const st = $("#statusRegister");
            st.textContent = "";
            st.className = "status";

            if (!username || !email || !pass || !confirm) {
                st.textContent = "ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯.";
                st.className = "status err";
                return;
            }
            try {
                const res = await fetch(API_BASE + "/api/auth/register", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ username, email, password: pass, confirmPassword: confirm })
                });
                const data = await res.json();
                if (!res.ok) {
                    st.textContent = data.message || "Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯.";
                    st.className = "status err";
                    return;
                }
                st.textContent = data.message || "Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§ÙˆÙ„ÛŒÙ‡ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯. Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.";
                st.className = "status ok";
                pendingEmail = email;
                const verifyBox = $("#verifyBox");
                const verifyEmail = $("#verifyEmail");
                if (verifyBox) {
                    verifyBox.style.display = "block";
                    verifyEmail.value = pendingEmail;
                }
            } catch {
                st.textContent = "Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±.";
                st.className = "status err";
            }
        }, "Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯...");
    });

    // VERIFY EMAIL
    $("#btnVerifyEmail")?.addEventListener("click", () => {
        const btn = $("#btnVerifyEmail");
        withLoading(btn, async () => {
            const email = $("#verifyEmail").value.trim();
            const code = $("#verifyCode").value.trim();
            const st = $("#statusVerify");
            st.textContent = "";
            st.className = "status";
            if (!email || !code) {
                st.textContent = "Ø§ÛŒÙ…ÛŒÙ„ Ùˆ Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.";
                st.className = "status err";
                return;
            }
            try {
                const res = await fetch(API_BASE + "/api/auth/verify-email", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ email, code })
                });
                const data = await res.json();
                if (!res.ok) {
                    st.textContent = data.message || "Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª.";
                    st.className = "status err";
                    return;
                }
                setUserSession(data.token, data.user);
                st.textContent = "Ø§ÛŒÙ…ÛŒÙ„ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯. Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯.";
                st.className = "status ok";
                applyUserUI();
            } catch {
                st.textContent = "Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±.";
                st.className = "status err";
            }
        }, "Ø¯Ø± Ø­Ø§Ù„ ØªØ£ÛŒÛŒØ¯...");
    });

    // FORGOT PASSWORD
    $("#btnForgot")?.addEventListener("click", () => {
        const btn = $("#btnForgot");
        withLoading(btn, async () => {
            const email = $("#forgotEmail").value.trim();
            const st = $("#statusForgot");
            st.textContent = "";
            st.className = "status";
            if (!email) {
                st.textContent = "Ø§ÛŒÙ…ÛŒÙ„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.";
                st.className = "status err";
                return;
            }
            try {
                const res = await fetch(API_BASE + "/api/auth/forgot-password", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ email })
                });
                const data = await res.json();
                st.textContent = data.message || "Ø¯Ø± ØµÙˆØ±Øª ØµØ­Øª Ø§ÛŒÙ…ÛŒÙ„ØŒ Ú©Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.";
                st.className = "status ok";
                $("#resetBox").style.display = "block";
            } catch {
                st.textContent = "Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±.";
                st.className = "status err";
            }
        }, "Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯...");
    });

    // RESET PASSWORD
    $("#btnReset")?.addEventListener("click", () => {
        const btn = $("#btnReset");
        withLoading(btn, async () => {
            const email = $("#forgotEmail").value.trim();
            const code = $("#resetCode").value.trim();
            const newPass = $("#resetPass").value;
            const confirmPass = $("#resetPassConfirm").value;
            const st = $("#statusReset");
            st.textContent = "";
            st.className = "status";
            if (!email || !code || !newPass || !confirmPass) {
                st.textContent = "Ù‡Ù…Ù‡â€ŒÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯.";
                st.className = "status err";
                return;
            }
            try {
                const res = await fetch(API_BASE + "/api/auth/reset-password", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ email, code, newPassword: newPass, confirmPassword: confirmPass })
                });
                const data = await res.json();
                if (!res.ok) {
                    st.textContent = data.message || "Ø®Ø·Ø§ Ø¯Ø± ØªØºÛŒÛŒØ± Ø±Ù…Ø².";
                    st.className = "status err";
                    return;
                }
                st.textContent = data.message || "Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± Ú©Ø±Ø¯.";
                st.className = "status ok";
            } catch {
                st.textContent = "Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±.";
                st.className = "status err";
            }
        }, "Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øª...");
    });

    // LOGOUT
    $("#btnLogoutUser")?.addEventListener("click", () => {
        clearUserSession();
        applyUserUI();
        loadCartFromStorage();
        renderCart();
        loadBooks();
    });

    // ========== INIT ==========
    (function init() {
        loadCartFromStorage();
        renderCart();
        applyUserUI();
        loadIntroMedia();
        loadStudentMedia();
        loadBooks();
    })();
</script>
</body>
    </html>
